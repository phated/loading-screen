//>>built
/*

 Lo-Dash 1.3.1 (Custom Build) <http://lodash.com/>
 Build: `lodash modern -o ./dist/lodash.js`
 Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 Available under MIT license <http://lodash.com/license>
*/
(function(d,i){var h,b,j,n=function(){},g=function(a){for(var c in a)return 0;return 1},a={}.toString,c=function(ga){return"[object Function]"==a.call(ga)},k=function(ga){return"[object String]"==a.call(ga)},m=function(ga){return"[object Array]"==a.call(ga)},e=function(a,c){if(a)for(var b=0;b<a.length;)c(a[b++])},o=function(a,c){for(var b in c)a[b]=c[b];return a},p=function(a,c){return o(Error(a),{src:"dojoLoader",info:c})},O=1,I=function(){return"_"+O++},l=function(a,c,b){return ha(a,c,b,0,l)},qa=
this,q=qa.document,z=q&&q.createElement("DiV"),A=l.has=function(a){return c(r[a])?r[a]=r[a](qa,q,z):r[a]},r=A.cache=i.hasCache;A.add=function(a,c,b,f){(void 0===r[a]||f)&&(r[a]=c);return b&&A(a)};for(var s in d.has)A.add(s,d.has[s],0,1);l.async=1;var E=new Function("return eval(arguments[0]);");l.eval=function(a,c){return E(a+"\r\n////@ sourceURL="+c)};var C={},u=l.signal=function(a,c){var b=C[a];e(b&&b.slice(0),function(a){a.apply(null,m(c)?c:[c])})},xa=l.on=function(a,c){var b=C[a]||(C[a]=[]);b.push(c);
return{remove:function(){for(var a=0;a<b.length;a++)if(b[a]===c){b.splice(a,1);break}}}},Ra=[],Sa={},ia=[],ya={},Ta=l.map={},ba=[],F={},Ka="",ja={},za={};s={};var V=function(a){var c,b,f,e;for(c in za)b=za[c],(f=c.match(/^url\:(.+)/))?ja["url:"+yb(f[1],a)]=b:"*now"==c?e=b:"*noref"!=c&&(f=Ua(c,a),ja[f.mid]=ja["url:"+f.url]=b);e&&e(U(a));za={}},ra=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},ca=function(a,c){c.splice(0,c.length);for(var b in a)c.push([b,a[b],
RegExp("^"+ra(b)+"(/|$)"),b.length]);c.sort(function(a,c){return c[3]-a[3]});return c},ka=function(a){var c=a.name;c||(c=a,a={name:c});a=o({main:"main"},a);a.location=a.location?a.location:c;if(a.packageMap)Ta[c]=a.packageMap;if(!a.main.indexOf("./"))a.main=a.main.substring(2);ya[c]=a},La=[],Q=function(a,c,b){for(var f in a){if("waitSeconds"==f)l.waitms=1E3*(a[f]||0);"cacheBust"==f&&(Ka=a[f]?k(a[f])?a[f]:(new Date).getTime()+"":"");if("baseUrl"==f||"combo"==f)l[f]=a[f];a[f]!==r&&(l.rawConfig[f]=a[f],
"has"!=f&&A.add("config-"+f,a[f],0,c))}if(!l.baseUrl)l.baseUrl="./";/\/$/.test(l.baseUrl)||(l.baseUrl+="/");for(f in a.has)A.add(f,a.has[f],0,c);e(a.packages,ka);for(j in a.packagePaths)e(a.packagePaths[j],function(a){var c=j+"/"+a;k(a)&&(a={name:a});a.location=c;ka(a)});ca(o(Ta,a.map),ba);e(ba,function(a){a[1]=ca(a[1],[]);if("*"==a[0])ba.star=a});ca(o(Sa,a.paths),ia);e(a.aliases,function(a){k(a[0])&&(a[0]=RegExp("^"+ra(a[0])+"$"));Ra.push(a)});if(c)La.push({config:a.config});else for(f in a.config)c=
W(f,b),c.config=o(c.config||{},a.config[f]);if(a.cache)V(),za=a.cache,a.cache["*noref"]&&V();u("config",[a,l.rawConfig])};l.rawConfig={};Q(i,1);Q(d,1);Q(s,1);var L=function(a){sa(function(){e(a.deps,Ma)})},ha=function(a,c,b,e,d){var g;if(k(a)){if((g=W(a,e,!0))&&g.executed)return g.result;throw p("undefinedModule",a);}m(a)||(Q(a,0,e),a=c,c=b);if(m(a))if(a.length){for(var b="require*"+I(),h,j=[],i=0;i<a.length;)h=a[i++],j.push(W(h,e));g=o(f("",b,0,""),{injected:2,deps:j,def:c||n,require:e?e.require:
l,gc:1});F[g.mid]=g;L(g);var q=Y&&0!="sync";sa(function(){Aa(g,q)});g.executed||x.push(g);w()}else c&&c();return d},U=function(a){if(!a)return l;var c=a.require;if(!c)c=function(b,f,e){return ha(b,f,e,a,c)},a.require=o(c,l),c.module=a,c.toUrl=function(c){return yb(c,a)},c.toAbsMid=function(c){return nb(c,a)};return c},x=[],B=[],y={},la=function(a){a.injected=1;y[a.mid]=1;a.url&&(y[a.url]=a.pack||1);Wa()},ma=function(a){a.injected=2;delete y[a.mid];a.url&&delete y[a.url];g(y)&&Na()},Z=l.idle=function(){return!B.length&&
g(y)&&!x.length&&!Y},P=function(a,c){if(c)for(var b=0;b<c.length;b++)if(c[b][2].test(a))return c[b];return 0},zb=function(a){for(var c=[],b,f,a=a.replace(/\\/g,"/").split("/");a.length;)b=a.shift(),".."==b&&c.length&&".."!=f?(c.pop(),f=c[c.length-1]):"."!=b&&c.push(f=b);return c.join("/")},f=function(a,c,b,f){return{pid:a,mid:c,pack:b,url:f,executed:0,def:0}},Ab=function(a,b,d,g,m,k,l,j){var n,i,o,q;q=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||q&&!b)return f(0,a,0,a);a=zb(q?b.mid+"/../"+a:a);
if(/^\./.test(a))throw p("irrationalPath",a);b&&(o=P(b.mid,k));(o=(o=o||k.star)&&P(a,o[1]))&&(a=o[1]+a.substring(o[3]));b=(h=a.match(/^([^\/]+)(\/(.+))?$/))?h[1]:"";(n=d[b])?a=b+"/"+(i=h[3]||n.main):b="";var z=0;e(Ra,function(b){var f=a.match(b[0]);f&&0<f.length&&(z=c(b[1])?a.replace(b[0],b[1]):b[1])});if(z)return Ab(z,0,d,g,m,k,l,j);if(d=g[a])return j?f(d.pid,d.mid,d.pack,d.url):g[a];g=(o=P(a,l))?o[1]+a.substring(o[3]):b?n.location+"/"+i:a;/(^\/)|(\:)/.test(g)||(g=m+g);return f(b,a,n,zb(g+".js"))},
Ua=function(a,c){return Ab(a,c,ya,F,l.baseUrl,ba,ia)},Bb=function(a,c,b){return a.normalize?a.normalize(c,function(a){return nb(a,b)}):nb(c,b)},Cb=0,W=function(a,c,b){var f,e;(f=a.match(/^(.+?)\!(.*)$/))?(e=W(f[1],c,b),5===e.executed&&!e.load&&ea(e),e.load?(f=Bb(e,f[2],c),a=e.mid+"!"+(e.dynamic?++Cb+"!":"")+f):(f=f[2],a=e.mid+"!"+ ++Cb+"!waitingForPlugin"),a={plugin:e,mid:a,req:U(c),prid:f}):a=Ua(a,c);return F[a.mid]||!b&&(F[a.mid]=a)},nb=l.toAbsMid=function(a,c){return Ua(a,c).mid},yb=l.toUrl=function(a,
c){var b=Ua(a+"/x",c),f=b.url;return Ba(0===b.pid?a:f.substring(0,f.length-5))},Ca={injected:2,executed:5,def:3,result:3},R=function(a){return F[a]=o({mid:a},Ca)},Xa=R("require"),na=R("exports"),$=R("module"),G={},Da=0,ea=function(a){var c=a.result;a.dynamic=c.dynamic;a.normalize=c.normalize;a.load=c.load;return a},Ya=function(a){var c={};e(a.loadQ,function(b){var f=Bb(a,b.prid,b.req.module),e=a.dynamic?b.mid.replace(/waitingForPlugin$/,f):a.mid+"!"+f,f=o(o({},b),{mid:e,prid:f,injected:0});F[e]||
Pa(F[e]=f);c[b.mid]=F[e];ma(b);delete F[b.mid]});a.loadQ=0;var b=function(a){for(var b=a.deps||[],f=0;f<b.length;f++)(a=c[b[f].mid])&&(b[f]=a)},f;for(f in F)b(F[f]);e(x,b)},ta=function(a){l.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=Da++;a.loadQ&&(ea(a),Ya(a));for(b=0;b<x.length;)x[b]===a?x.splice(b,1):b++;/^require\*/.test(a.mid)&&delete F[a.mid]},Za=[],Aa=function(a,b){if(4===a.executed)return l.trace("loader-circular-dependency",[Za.concat(a.mid).join("->")]),!a.def||b?G:a.cjs&&
a.cjs.exports;if(!a.executed){if(!a.def)return G;var f=a.mid,e=a.deps||[],d,g=[],m=0;for(a.executed=4;m<e.length;){d=e[m++];d=d===Xa?U(a):d===na?a.cjs.exports:d===$?a.cjs:Aa(d,b);if(d===G)return a.executed=0,l.trace("loader-exec-module",["abort",f]),G;g.push(d)}l.trace("loader-run-factory",[a.mid]);f=a.def;g=c(f)?f.apply(null,g):f;a.result=void 0===g&&a.cjs?a.cjs.exports:g;ta(a)}return a.result},Y=0,sa=function(a){try{Y++,a()}finally{Y--}Z()&&u("idle",[])},w=function(){Y||sa(function(){for(var a,
c,b=0;b<x.length;)a=Da,c=x[b],Aa(c),a!=Da?b=0:b++})};void 0===A("dojo-loader-eval-hint-url")&&A.add("dojo-loader-eval-hint-url",1);var Ba=function(a){a+="";return a+(Ka?(/\?/.test(a)?"&":"?")+Ka:"")},Pa=function(a){var c=a.plugin;5===c.executed&&!c.load&&ea(c);var b=function(c){a.result=c;ma(a);ta(a);w()};c.load?c.load(a.prid,a.req,b):c.loadQ?c.loadQ.push(a):(c.loadQ=[a],x.unshift(c),Ma(c))},oa=0,ua=0,Ea=0,$a=function(a,c){A("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));Ea=1;a===oa?oa.call(null):
l.eval(a,A("dojo-loader-eval-hint-url")?c.url:c.mid);Ea=0},Ma=function(a){var c=a.mid,b=a.url;if(!a.executed&&!a.injected&&!(y[c]||a.url&&(a.pack&&y[a.url]===a.pack||1==y[a.url])))if(la(a),a.plugin)Pa(a);else{var f=function(){ab(a);2!==a.injected&&(ma(a),o(a,Ca),l.trace("loader-define-nonmodule",[a.url]));w()};(oa=ja[c]||ja["url:"+a.url])?(l.trace("loader-inject",["cache",a.mid,b]),$a(oa,a),f()):(l.trace("loader-inject",["script",a.mid,b]),ua=a,l.injectUrl(Ba(b),f,a),ua=0)}},va=function(a,b,f){l.trace("loader-define-module",
[a.mid,b]);if(2===a.injected)return u("error",p("multipleDefine",a)),a;o(a,{deps:b,def:f,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(c){a.cjs.exports=c},config:function(){return a.config}}});for(var e=0;e<b.length;e++)b[e]=W(b[e],a);ma(a);if(!c(f)&&!b.length)a.result=f,ta(a);return a},ab=function(a,c){for(var b=[],f,d;B.length;)d=B.shift(),c&&(d[0]=c.shift()),f=d[0]&&W(d[0])||a,b.push([f,d[1],d[2]]);V(a);e(b,function(a){L(va.apply(null,a))})},Na=n,Wa=n;A.add("ie-event-behavior",
!!q.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var Fa=function(a,c,b,f){if(A("ie-event-behavior"))return a.attachEvent(b,f),function(){a.detachEvent(b,f)};a.addEventListener(c,f,!1);return function(){a.removeEventListener(c,f,!1)}},bb=Fa(window,"load","onload",function(){l.pageLoaded=1;"complete"!=q.readyState&&(q.readyState="complete");bb()}),Ga=q.getElementsByTagName("script")[0],cb=Ga.parentNode;l.injectUrl=function(a,c,b){var b=b.node=q.createElement("script"),
f=Fa(b,"load","onreadystatechange",function(a){var a=a||window.event,b=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(b.readyState))f(),e(),c&&c()}),e=Fa(b,"error","onerror",function(c){f();e();u("error",p("scriptError",[a,c]))});b.type="text/javascript";b.charset="utf-8";b.src=a;cb.insertBefore(b,Ga);return b};l.log=n;l.trace=n;R=function(a,b,f){var e=arguments.length,d=["require","exports","module"],g=[0,a,b];1==e?g=[0,c(a)?d:[],a]:2==e&&k(a)?g=[a,c(b)?d:[],b]:3==e&&(g=[a,b,f]);
l.trace("loader-define",g.slice(0,2));if((e=g[0]&&W(g[0]))&&!y[e.mid])L(va(e,g[1],g[2]));else if(!A("ie-event-behavior")||Ea)B.push(g);else{e=e||ua;if(!e)for(a in y)if((d=F[a])&&d.node&&"interactive"===d.node.readyState){e=d;break}e?(V(e),L(va(e,g[1],g[2]))):u("error",p("ieDefineFailed",g[0]));w()}};R.amd={vendor:"dojotoolkit.org"};o(o(l,i.loaderPatch),d.loaderPatch);xa("error",function(a){try{if(console.error(a),a instanceof Error)for(var c in a);}catch(b){}});o(l,{uid:I,cache:ja,packs:ya});if(!qa.define)qa.define=
R,qa.require=l,e(La,function(a){Q(a)}),xa=s.deps||d.deps||i.deps,s=s.callback||d.callback||i.callback,l.boot=xa||s?[xa||[],s]:0})(this.dojoConfig||this.djConfig||this.require||{},{async:1,baseUrl:"./",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../loading-screen",name:"loading-screen"},{location:".",name:"dojo"},{location:"../dcl",main:"dcl",name:"dcl"},{location:"../lodash",main:"lodash",name:"lodash"},
{location:"../hammer",main:"hammer",name:"hammer"},{location:"../frozen",main:"GameCore",name:"frozen"},{location:"../game",main:"game",name:"game"}]});
require({cache:{"dist/game":function(){define([],1)},"game/game":function(){define("./update,./draw,lodash,frozen/GameCore,frozen/Animation,frozen/plugins/loadImage!frozenjs.png".split(","),function(d,i,h,b,j,n){(new b({canvasId:"canvas",gameAreaId:"gameArea",update:d,draw:i,anims:function(b,a,c){for(var d=[],b=Math.floor(Math.sqrt(b)),m=0;m<b;m++){var e=j.prototype.createFromSheet(b,c,a,a.width/b,a.height/b,m);e.frames=h.shuffle(e.frames);h.forEach(e.frames,function(a,c){a.endTime=e.totalDuration/
e.frames.length*(c+1)});d.push(e)}return d}(50,n,250)})).run()})},"game/update":function(){define(["lodash"],function(d){return function(i){d.forEach(this.anims,function(d){d.update(i)})}})},"lodash/lodash":function(){(function(d){function i(a,c,b){for(var b=(b||0)-1,e=a.length;++b<e;)if(a[b]===c)return b;return-1}function h(a,c){var b=typeof c,a=a.cache;if("boolean"==b||null==c)return a[c];"number"!=b&&"string"!=b&&(b="object");var e="number"==b?c:z+c,a=a[b]||(a[b]={});return"object"==b?a[e]&&-1<
i(a[e],c)?0:-1:a[e]?0:-1}function b(a){var c=this.cache,b=typeof a;if("boolean"==b||null==a)c[a]=!0;else{"number"!=b&&"string"!=b&&(b="object");var e="number"==b?a:z+a,d=c[b]||(c[b]={});if("object"==b){if((d[e]||(d[e]=[])).push(a)==this.array.length)c[b]=!1}else d[e]=!0}}function j(a){return a.charCodeAt(0)}function n(a,c){var b=a.index,e=c.index,a=a.criteria,c=c.criteria;if(a!==c){if(a>c||"undefined"==typeof a)return 1;if(a<c||"undefined"==typeof c)return-1}return b<e?-1:1}function g(a){var c=-1,
d=a.length,g=k();g["false"]=g["null"]=g["true"]=g.undefined=!1;var m=k();m.array=a;m.cache=g;for(m.push=b;++c<d;)m.push(a[c]);return!1===g.object?(e(m),null):m}function a(a){return"\\"+y[a]}function c(){return I.pop()||[]}function k(){return l.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,leading:!1,maxWait:0,"null":!1,number:null,object:null,push:null,string:null,trailing:!1,"true":!1,undefined:!1,value:null}}function m(a){a.length=0;I.length<r&&I.push(a)}function e(a){var c=a.cache;
c&&e(c);a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null;l.length<r&&l.push(a)}function o(a,c,b){c||(c=0);"undefined"==typeof b&&(b=a?a.length:0);for(var e=-1,b=b-c||0,d=Array(0>b?0:b);++e<b;)d[e]=a[c+e];return d}function p(b){function f(a){return a&&"object"==typeof a&&!S(a)&&J.call(a,"__wrapped__")?a:new l(a)}function l(a){this.__wrapped__=a}function I(a,b,c,f){function e(){var f=arguments,t=g?this:b;d||(a=b[m]);c.length&&(f=f.length?(f=H.call(f),l?f.concat(c):c.concat(f)):c);
return this instanceof e?(t=G(a.prototype)?db(a.prototype):{},f=a.apply(t,f),G(f)?f:t):a.apply(t,f)}var d=$(a),g=!c,m=b;if(g)var l=f,c=b;else if(!d){if(!f)throw new Ib;b=a}return e}function r(a){return Db[a]}function y(){var a=(a=f.indexOf)===ab?i:a;return a}function W(a){return function(b,c,t,e){"boolean"!=typeof c&&null!=c&&(e=t,t=!(e&&e[c]===b)?c:O,c=!1);null!=t&&(t=f.createCallback(t,e));return a(b,c,t,e)}}function Z(a){var b,c;if(!(a&&N.call(a)==L)||(b=a.constructor,$(b)&&!(b instanceof b)))return!1;
wa(a,function(a,b){c=b});return c===O||J.call(a,c)}function la(a){return Jb[a]}function Ca(a,b,v,t,e,d){var g=a;"boolean"!=typeof b&&null!=b&&(t=v,v=b,b=!1);if("function"==typeof v){v="undefined"==typeof t?v:f.createCallback(v,t,1);g=v(g);if("undefined"!=typeof g)return g;g=a}if(t=G(g)){var l=N.call(g);if(!x[l])return g;var h=S(g)}if(!t||!b)return t?h?o(g):pb({},g):g;t=fa[l];switch(l){case ca:case ka:return new t(+g);case Q:case U:return new t(g);case ha:return t(g.source,Ra.exec(g))}l=!e;e||(e=c());
d||(d=c());for(var k=e.length;k--;)if(e[k]==a)return d[k];g=h?t(g.length):{};if(h){if(J.call(a,"index"))g.index=a.index;if(J.call(a,"input"))g.input=a.input}e.push(a);d.push(g);(h?w:D)(a,function(a,c){g[c]=Ca(a,b,v,O,e,d)});l&&(m(e),m(d));return g}function R(a){var b=[];wa(a,function(a,c){$(a)&&b.push(c)});return b.sort()}function Xa(a){for(var b=-1,c=T(a),f=c.length,e={};++b<f;){var d=c[b];e[a[d]]=d}return e}function na(a,b,v,e,d,g){var l=v===q;if("function"==typeof v&&!l){var v=f.createCallback(v,
e,2),h=v(a,b);if("undefined"!=typeof h)return!!h}if(a===b)return 0!==a||1/a==1/b;var k=typeof a,j=typeof b;if(a===a&&(!a||"function"!=k&&"object"!=k)&&(!b||"function"!=j&&"object"!=j))return!1;if(null==a||null==b)return a===b;j=N.call(a);k=N.call(b);j==V&&(j=L);k==V&&(k=L);if(j!=k)return!1;switch(j){case ca:case ka:return+a==+b;case Q:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case ha:case U:return a==da(b)}k=j==ra;if(!k){if(J.call(a,"__wrapped__ ")||J.call(b,"__wrapped__"))return na(a.__wrapped__||a,
b.__wrapped__||b,v,e,d,g);if(j!=L)return!1;var j=a.constructor,n=b.constructor;if(j!=n&&(!$(j)||!(j instanceof j&&$(n)&&n instanceof n)))return!1}n=!d;d||(d=c());g||(g=c());for(j=d.length;j--;)if(d[j]==a)return g[j]==b;var i=0,h=!0;d.push(a);g.push(b);if(k){j=a.length;i=b.length;h=i==a.length;if(!h&&!l)return h;for(;i--;)if(k=j,n=b[i],l)for(;k--&&!(h=na(a[k],n,v,e,d,g)););else if(!(h=na(a[i],n,v,e,d,g)))break;return h}wa(b,function(b,c,Ha){if(J.call(Ha,c))return i++,h=J.call(a,c)&&na(a[c],b,v,e,d,
g)});h&&!l&&wa(a,function(a,b,c){if(J.call(c,b))return h=-1<--i});n&&(m(d),m(g));return h}function $(a){return"function"==typeof a}function G(a){return!(!a||!B[typeof a])}function Da(a){return"number"==typeof a||N.call(a)==Q}function ea(a){return"string"==typeof a||N.call(a)==U}function Ya(a,b,v){var e=arguments,d=0,g=2;if(!G(a))return a;if(v===q)var h=e[3],l=e[4],j=e[5];else{var k=!0,l=c(),j=c();if("number"!=typeof v)g=e.length;3<g&&"function"==typeof e[g-2]?h=f.createCallback(e[--g-1],e[g--],2):
2<g&&"function"==typeof e[g-1]&&(h=e[--g])}for(;++d<g;)(S(e[d])?w:D)(e[d],function(b,c){var Ha,v,e=b,f=a[c];if(b&&((v=S(b))||qb(b))){for(e=l.length;e--;)if(Ha=l[e]==b){f=j[e];break}if(!Ha){var d;if(h&&(e=h(f,b),d="undefined"!=typeof e))f=e;d||(f=v?S(f)?f:[]:qb(f)?f:{});l.push(b);j.push(f);d||(f=Ya(f,b,q,h,l,j))}}else h&&(e=h(f,b),"undefined"==typeof e&&(e=b)),"undefined"!=typeof e&&(f=e);a[c]=f});k&&(m(l),m(j));return a}function ta(a){for(var b=-1,c=T(a),e=c.length,f=K(e);++b<e;)f[b]=a[c[b]];return f}
function Za(a,b,c){var e=-1,f=y(),d=a?a.length:0,g=!1,c=(0>c?aa(0,d+c):c)||0;d&&"number"==typeof d?g=-1<(ea(a)?a.indexOf(b,c):f(a,b,c)):D(a,function(a){if(++e>=c)return!(g=a===b)});return g}function Aa(a,b,c){var e=!0,b=f.createCallback(b,c),c=-1,d=a?a.length:0;if("number"==typeof d)for(;++c<d&&(e=!!b(a[c],c,a)););else D(a,function(a,c,f){return e=!!b(a,c,f)});return e}function Y(a,b,c){var e=[],b=f.createCallback(b,c),c=-1,d=a?a.length:0;if("number"==typeof d)for(;++c<d;){var g=a[c];b(g,c,a)&&e.push(g)}else D(a,
function(a,c,f){b(a,c,f)&&e.push(a)});return e}function sa(a,b,c){var b=f.createCallback(b,c),c=-1,e=a?a.length:0;if("number"==typeof e)for(;++c<e;){var d=a[c];if(b(d,c,a))return d}else{var g;D(a,function(a,c,e){if(b(a,c,e))return g=a,!1});return g}}function w(a,b,c){var e=-1,d=a?a.length:0,b=b&&"undefined"==typeof c?b:f.createCallback(b,c);if("number"==typeof d)for(;++e<d&&!(!1===b(a[e],e,a)););else D(a,b);return a}function Ba(a,b,c){var e=-1,d=a?a.length:0,b=f.createCallback(b,c);if("number"==typeof d)for(var g=
K(d);++e<d;)g[e]=b(a[e],e,a);else g=[],D(a,function(a,c,f){g[++e]=b(a,c,f)});return g}function Pa(a,b,c){var e=-Infinity,d=e;if(!b&&S(a))for(var c=-1,g=a.length;++c<g;){var h=a[c];h>d&&(d=h)}else b=!b&&ea(a)?j:f.createCallback(b,c),w(a,function(a,c,f){c=b(a,c,f);c>e&&(e=c,d=a)});return d}function oa(a,b){var c=-1,e=a?a.length:0;if("number"==typeof e)for(var f=K(e);++c<e;)f[c]=a[c][b];return f||Ba(a,b)}function ua(a,b,c,e){if(!a)return c;var d=3>arguments.length,b=f.createCallback(b,e,4),g=-1,h=a.length;
if("number"==typeof h)for(d&&(c=a[++g]);++g<h;)c=b(c,a[g],g,a);else D(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)});return c}function Ea(a,b,c,e){var d=a?a.length:0,g=3>arguments.length;if("number"!=typeof d)var h=T(a),d=h.length;b=f.createCallback(b,e,4);w(a,function(e,f,t){f=h?h[--d]:--d;c=g?(g=!1,a[f]):b(c,a[f],f,t)});return c}function $a(a,b,c){var e,b=f.createCallback(b,c),c=-1,d=a?a.length:0;if("number"==typeof d)for(;++c<d&&!(e=b(a[c],c,a)););else D(a,function(a,c,f){return!(e=b(a,c,f))});return!!e}
function Ma(a){var b=-1,c=y(),f=a?a.length:0,d=Ia.apply(M,H.call(arguments,1)),l=[],j=f>=A&&c===i;if(j){var k=g(d);k?(c=h,d=k):j=!1}for(;++b<f;)k=a[b],0>c(d,k)&&l.push(k);j&&e(d);return l}function va(a,b,c){if(a){var e=0,d=a.length;if("number"!=typeof b&&null!=b)for(var g=-1,b=f.createCallback(b,c);++g<d&&b(a[g],g,a);)e++;else if(e=b,null==e||c)return a[0];return o(a,0,eb(aa(0,e),d))}}function ab(a,b,c){if("number"==typeof c)var e=a?a.length:0,c=0>c?aa(0,e+c):c||0;else if(c)return c=Wa(a,b),a[c]===
b?c:-1;return a?i(a,b,c):-1}function Na(a,b,c){if("number"!=typeof b&&null!=b)for(var e=0,d=-1,g=a?a.length:0,b=f.createCallback(b,c);++d<g&&b(a[d],d,a);)e++;else e=null==b||c?1:aa(0,b);return o(a,e)}function Wa(a,b,c,e){for(var d=0,g=a?a.length:d,c=c?f.createCallback(c,e,1):kb,b=c(b);d<g;)e=d+g>>>1,c(a[e])<b?d=e+1:g=e;return d}function Fa(a){for(var b=-1,c=a?Pa(oa(a,"length")):0,e=K(0>c?0:c);++b<c;)e[b]=oa(a,b);return e}function bb(a,b){for(var c=-1,e=a?a.length:0,f={};++c<e;){var d=a[c];b?f[d]=
b[c]:f[d[0]]=d[1]}return f}function Ga(a,b){return Eb.fastBind||pa&&2<arguments.length?pa.call.apply(pa,arguments):I(a,b,H.call(arguments,2))}function cb(a,b,c){function e(){fb(n);fb(i);j=0;n=i=null}function f(){var b=o&&(!p||1<j);e();b&&(!1!==m&&(k=new Va),h=a.apply(l,g))}function d(){e();if(o||m!==b)k=new Va,h=a.apply(l,g)}var g,h,l,j=0,k=0,m=!1,n=null,i=null,o=!0,b=aa(0,b||0);if(!0===c)var p=!0,o=!1;else if(G(c))p=c.leading,m="maxWait"in c&&aa(b,c.maxWait||0),o="trailing"in c?c.trailing:o;return function(){g=
arguments;l=this;j++;fb(i);if(!1===m)p&&2>j&&(h=a.apply(l,g));else{var c=new Va;!n&&!p&&(k=c);var e=m-(c-k);0>=e?(fb(n),n=null,k=c,h=a.apply(l,g)):n||(n=gb(d,e))}b!==m&&(i=gb(f,b));return h}}function ga(a){var b=H.call(arguments,1);return gb(function(){a.apply(O,b)},1)}function kb(a){return a}function wb(a){w(R(a),function(b){var c=f[b]=a[b];f.prototype[b]=function(){var a=this.__wrapped__,b=[a];hb.apply(b,arguments);b=c.apply(f,b);return a&&"object"==typeof a&&a===b?this:new l(b)}})}function xb(){return this.__wrapped__}
var b=b?P.defaults(d.Object(),b,P.pick(d,ja)):d,K=b.Array,lb=b.Boolean,Va=b.Date,mb=b.Function,X=b.Math,Hb=b.Number,Oa=b.Object,ob=b.RegExp,da=b.String,Ib=b.TypeError,M=[],rb=Oa.prototype,Kb=b._,Ja=ob("^"+da(rb.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Lb=X.ceil,fb=b.clearTimeout,Ia=M.concat,Fb=X.floor,Mb=mb.prototype.toString,Qa=Ja.test(Qa=Oa.getPrototypeOf)&&Qa,J=rb.hasOwnProperty,hb=M.push,ib=b.setImmediate,gb=b.setTimeout,N=rb.toString,pa=Ja.test(pa=
N.bind)&&pa,db=Ja.test(db=Oa.create)&&db,sb=Ja.test(sb=K.isArray)&&sb,Nb=b.isFinite,Ob=b.isNaN,jb=Ja.test(jb=Oa.keys)&&jb,aa=X.max,eb=X.min,tb=b.parseInt,Gb=X.random,H=M.slice,X=Ja.test(b.attachEvent),X=pa&&!/\n|true/.test(pa+X),fa={};fa[ra]=K;fa[ca]=lb;fa[ka]=Va;fa[La]=mb;fa[L]=Oa;fa[Q]=Hb;fa[ha]=ob;fa[U]=da;l.prototype=f.prototype;var Eb=f.support={};Eb.fastBind=pa&&!X;f.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Sa,variable:"",imports:{_:f}};var S=sb,T=!jb?
function(a){var b,c=[];if(!a||!B[typeof a])return c;for(b in a)J.call(a,b)&&c.push(b);return c}:function(a){return!G(a)?[]:jb(a)},Db={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Jb=Xa(Db),pb=function(a,b,c){var e,d=a,g=d;if(!d)return g;var h=arguments,l=0,j="number"==typeof c?2:h.length;if(3<j&&"function"==typeof h[j-2])var k=f.createCallback(h[--j-1],h[j--],2);else 2<j&&"function"==typeof h[j-1]&&(k=h[--j]);for(;++l<j;)if((d=h[l])&&B[typeof d])for(var m=-1,n=B[typeof d]&&T(d),i=n?
n.length:0;++m<i;)e=n[m],g[e]=k?k(g[e],d[e]):d[e];return g},ub=function(a,b,c){var e,f=a,d=f;if(!f)return d;for(var g=arguments,h=0,j="number"==typeof c?2:g.length;++h<j;)if((f=g[h])&&B[typeof f])for(var l=-1,k=B[typeof f]&&T(f),m=k?k.length:0;++l<m;)e=k[l],"undefined"==typeof d[e]&&(d[e]=f[e]);return d},wa=function(a,b,c){var e;if(!a||!B[typeof a])return a;b=b&&"undefined"==typeof c?b:f.createCallback(b,c);for(e in a)if(!1===b(a[e],e,a))break;return a},D=function(a,b,c){if(!a||!B[typeof a])return a;
for(var b=b&&"undefined"==typeof c?b:f.createCallback(b,c),e=-1,d=B[typeof a]&&T(a),g=d?d.length:0;++e<g&&!(c=d[e],!1===b(a[c],c,a)););return a},qb=function(a){if(!(a&&N.call(a)==L))return!1;var b=a.valueOf,c="function"==typeof b&&(c=Qa(b))&&Qa(c);return c?a==c||Qa(a)==c:Z(a)},lb=W(function Ha(a,b,c){for(var e=-1,f=a?a.length:0,d=[];++e<f;){var g=a[e];c&&(g=c(g,e,a));S(g)?hb.apply(d,b?g:Ha(g)):d.push(g)}return d}),vb=W(function(a,b,f){var d=-1,j=y(),l=a?a.length:0,k=[],n=!b&&l>=A&&j===i,o=f||n?c():
k;if(n){var p=g(o);p?(j=h,o=p):(n=!1,o=f?o:(m(o),k))}for(;++d<l;){var p=a[d],q=f?f(p,d,a):p;if(b?!d||o[o.length-1]!==q:0>j(o,q))(f||n)&&o.push(q),k.push(p)}n?(m(o.array),e(o)):f&&m(o);return k});X&&ma&&"function"==typeof ib&&(ga=Ga(ib,b));ib=8==tb(ya+"08")?tb:function(a,b){return tb(ea(a)?a.replace(Ta,""):a,b||0)};f.after=function(a,b){return 1>a?b():function(){if(1>--a)return b.apply(this,arguments)}};f.assign=pb;f.at=function(a){for(var b=-1,c=Ia.apply(M,H.call(arguments,1)),e=c.length,f=K(e);++b<
e;)f[b]=a[c[b]];return f};f.bind=Ga;f.bindAll=function(a){for(var b=1<arguments.length?Ia.apply(M,H.call(arguments,1)):R(a),c=-1,e=b.length;++c<e;){var f=b[c];a[f]=Ga(a[f],a)}return a};f.bindKey=function(a,b){return I(a,b,H.call(arguments,2),q)};f.compact=function(a){for(var b=-1,c=a?a.length:0,e=[];++b<c;){var f=a[b];f&&e.push(f)}return e};f.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}};f.countBy=function(a,b,c){var e=
{},b=f.createCallback(b,c);w(a,function(a,c,f){c=da(b(a,c,f));J.call(e,c)?e[c]++:e[c]=1});return e};f.createCallback=function(a,b,c){if(null==a)return kb;var e=typeof a;if("function"!=e){if("object"!=e)return function(b){return b[a]};var f=T(a);return function(b){for(var c=f.length,e=!1;c--&&(e=na(b[f[c]],a[f[c]],q)););return e}}return"undefined"==typeof b||ia&&!ia.test(Mb.call(a))?a:1===c?function(c){return a.call(b,c)}:2===c?function(c,e){return a.call(b,c,e)}:4===c?function(c,e,f,d){return a.call(b,
c,e,f,d)}:function(c,e,f){return a.call(b,c,e,f)}};f.debounce=cb;f.defaults=ub;f.defer=ga;f.delay=function(a,b){var c=H.call(arguments,2);return gb(function(){a.apply(O,c)},b)};f.difference=Ma;f.filter=Y;f.flatten=lb;f.forEach=w;f.forIn=wa;f.forOwn=D;f.functions=R;f.groupBy=function(a,b,c){var e={},b=f.createCallback(b,c);w(a,function(a,c,f){c=da(b(a,c,f));(J.call(e,c)?e[c]:e[c]=[]).push(a)});return e};f.initial=function(a,b,c){if(!a)return[];var e=0,d=a.length;if("number"!=typeof b&&null!=b)for(var g=
d,b=f.createCallback(b,c);g--&&b(a[g],g,a);)e++;else e=null==b||c?1:b||e;return o(a,0,eb(aa(0,d-e),d))};f.intersection=function(a){for(var b=arguments,f=b.length,d=-1,j=c(),k=-1,l=y(),n=a?a.length:0,o=[],p=c();++d<f;){var q=b[d];j[d]=l===i&&(q?q.length:0)>=A&&g(d?b[d]:p)}a:for(;++k<n;){var z=j[0],q=a[k];if(0>(z?h(z,q):l(p,q))){d=f;for((z||p).push(q);--d;)if(z=j[d],0>(z?h(z,q):l(b[d],q)))continue a;o.push(q)}}for(;f--;)(z=j[f])&&e(z);m(j);m(p);return o};f.invert=Xa;f.invoke=function(a,b){var c=H.call(arguments,
2),e=-1,f="function"==typeof b,d=a?a.length:0,g=K("number"==typeof d?d:0);w(a,function(a){g[++e]=(f?b:a[b]).apply(a,c)});return g};f.keys=T;f.map=Ba;f.max=Pa;f.memoize=function(a,b){function c(){var e=c.cache,f=z+(b?b.apply(this,arguments):arguments[0]);return J.call(e,f)?e[f]:e[f]=a.apply(this,arguments)}c.cache={};return c};f.merge=Ya;f.min=function(a,b,c){var e=Infinity,d=e;if(!b&&S(a))for(var c=-1,g=a.length;++c<g;){var h=a[c];h<d&&(d=h)}else b=!b&&ea(a)?j:f.createCallback(b,c),w(a,function(a,
c,f){c=b(a,c,f);c<e&&(e=c,d=a)});return d};f.omit=function(a,b,c){var e=y(),d="function"==typeof b,g={};if(d)b=f.createCallback(b,c);else var h=Ia.apply(M,H.call(arguments,1));wa(a,function(a,c,f){if(d?!b(a,c,f):0>e(h,c))g[c]=a});return g};f.once=function(a){var b,c;return function(){if(b)return c;b=!0;c=a.apply(this,arguments);a=null;return c}};f.pairs=function(a){for(var b=-1,c=T(a),e=c.length,f=K(e);++b<e;){var d=c[b];f[b]=[d,a[d]]}return f};f.partial=function(a){return I(a,H.call(arguments,1))};
f.partialRight=function(a){return I(a,H.call(arguments,1),null,q)};f.pick=function(a,b,c){var e={};if("function"!=typeof b)for(var d=-1,g=Ia.apply(M,H.call(arguments,1)),h=G(a)?g.length:0;++d<h;){var j=g[d];j in a&&(e[j]=a[j])}else b=f.createCallback(b,c),wa(a,function(a,c,f){b(a,c,f)&&(e[c]=a)});return e};f.pluck=oa;f.range=function(a,b,c){a=+a||0;c=+c||1;null==b&&(b=a,a=0);for(var e=-1,b=aa(0,Lb((b-a)/c)),f=K(b);++e<b;)f[e]=a,a+=c;return f};f.reject=function(a,b,c){b=f.createCallback(b,c);return Y(a,
function(a,c,e){return!b(a,c,e)})};f.rest=Na;f.shuffle=function(a){var b=-1,c=a?a.length:0,e=K("number"==typeof c?c:0);w(a,function(a){var c=Fb(Gb()*(++b+1));e[b]=e[c];e[c]=a});return e};f.sortBy=function(a,b,c){var d=-1,g=a?a.length:0,h=K("number"==typeof g?g:0),b=f.createCallback(b,c);w(a,function(a,c,e){var f=h[++d]=k();f.criteria=b(a,c,e);f.index=d;f.value=a});g=h.length;for(h.sort(n);g--;)a=h[g],h[g]=a.value,e(a);return h};f.tap=function(a,b){b(a);return a};f.throttle=function(a,b,c){var f=!0,
d=!0;!1===c?f=!1:G(c)&&(f="leading"in c?c.leading:f,d="trailing"in c?c.trailing:d);c=k();c.leading=f;c.maxWait=b;c.trailing=d;a=cb(a,b,c);e(c);return a};f.times=function(a,b,c){for(var a=-1<(a=+a)?a:0,e=-1,d=K(a),b=f.createCallback(b,c,1);++e<a;)d[e]=b(e);return d};f.toArray=function(a){return a&&"number"==typeof a.length?o(a):ta(a)};f.transform=function(a,b,c,e){var d=S(a),b=f.createCallback(b,e,4);null==c&&(d?c=[]:(e=a&&a.constructor,c=G(e&&e.prototype)?db(e&&e.prototype):{}));(d?w:D)(a,function(a,
e,f){return b(c,a,e,f)});return c};f.union=function(a){S(a)||(arguments[0]=a?H.call(a):M);return vb(Ia.apply(M,arguments))};f.uniq=vb;f.unzip=Fa;f.values=ta;f.where=Y;f.without=function(a){return Ma(a,H.call(arguments,1))};f.wrap=function(a,b){return function(){var c=[a];hb.apply(c,arguments);return b.apply(this,c)}};f.zip=function(a){return a?Fa(arguments):[]};f.zipObject=bb;f.collect=Ba;f.drop=Na;f.each=w;f.extend=pb;f.methods=R;f.object=bb;f.select=Y;f.tail=Na;f.unique=vb;wb(f);f.chain=f;f.prototype.chain=
function(){return this};f.clone=Ca;f.cloneDeep=function(a,b,c){return Ca(a,!0,b,c)};f.contains=Za;f.escape=function(a){return null==a?"":da(a).replace(F,r)};f.every=Aa;f.find=sa;f.findIndex=function(a,b,c){for(var e=-1,d=a?a.length:0,b=f.createCallback(b,c);++e<d;)if(b(a[e],e,a))return e;return-1};f.findKey=function(a,b,c){var e,b=f.createCallback(b,c);D(a,function(a,c,f){if(b(a,c,f))return e=c,!1});return e};f.has=function(a,b){return a?J.call(a,b):!1};f.identity=kb;f.indexOf=ab;f.isArguments=function(a){return N.call(a)==
V};f.isArray=S;f.isBoolean=function(a){return!0===a||!1===a||N.call(a)==ca};f.isDate=function(a){return a?"object"==typeof a&&N.call(a)==ka:!1};f.isElement=function(a){return a?1===a.nodeType:!1};f.isEmpty=function(a){var b=!0;if(!a)return b;var c=N.call(a),e=a.length;if(c==ra||c==U||c==V||c==L&&"number"==typeof e&&$(a.splice))return!e;D(a,function(){return b=!1});return b};f.isEqual=na;f.isFinite=function(a){return Nb(a)&&!Ob(parseFloat(a))};f.isFunction=$;f.isNaN=function(a){return Da(a)&&a!=+a};
f.isNull=function(a){return null===a};f.isNumber=Da;f.isObject=G;f.isPlainObject=qb;f.isRegExp=function(a){return a?"object"==typeof a&&N.call(a)==ha:!1};f.isString=ea;f.isUndefined=function(a){return"undefined"==typeof a};f.lastIndexOf=function(a,b,c){var e=a?a.length:0;for("number"==typeof c&&(e=(0>c?aa(0,e+c):eb(c,e-1))+1);e--;)if(a[e]===b)return e;return-1};f.mixin=wb;f.noConflict=function(){b._=Kb;return this};f.parseInt=ib;f.random=function(a,b){null==a&&null==b&&(b=1);a=+a||0;null==b?(b=a,
a=0):b=+b||0;var c=Gb();return a%1||b%1?a+eb(c*(b-a+parseFloat("1e-"+((c+"").length-1))),b):a+Fb(c*(b-a+1))};f.reduce=ua;f.reduceRight=Ea;f.result=function(a,b){var c=a?a[b]:O;return $(c)?a[b]():c};f.runInContext=p;f.size=function(a){var b=a?a.length:0;return"number"==typeof b?b:T(a).length};f.some=$a;f.sortedIndex=Wa;f.template=function(b,c,e){var d=f.templateSettings;b||(b="");var e=ub({},e,d),g=ub({},e.imports,d.imports),d=T(g),g=ta(g),h,j=0,l=e.interpolate||ba,k="__p += '",l=ob((e.escape||ba).source+
"|"+l.source+"|"+(l===Sa?xa:ba).source+"|"+(e.evaluate||ba).source+"|$","g");b.replace(l,function(c,e,f,d,g,l){f||(f=d);k+=b.slice(j,l).replace(Ka,a);e&&(k+="' +\n__e("+e+") +\n'");g&&(h=!0,k+="';\n"+g+";\n__p += '");f&&(k+="' +\n((__t = ("+f+")) == null ? '' : __t) +\n'");j=l+c.length;return c});var k=k+"';\n",m=l=e.variable;m||(l="obj",k="with ("+l+") {\n"+k+"\n}\n");k=(h?k.replace(s,""):k).replace(E,"$1").replace(C,"$1;");k="function("+l+") {\n"+(m?"":l+" || ("+l+" = {});\n")+"var __t, __p = '', __e = _.escape"+
(h?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+k+"return __p\n}";e="\n/*\n//@ sourceURL="+(e.sourceURL||"/lodash/template/source["+za++ +"]")+"\n*/";try{var n=mb(d,"return "+k+e).apply(O,g)}catch(o){throw o.source=k,o;}if(c)return n(c);n.source=k;return n};f.unescape=function(a){return null==a?"":da(a).replace(u,la)};f.uniqueId=function(a){var b=++qa;return da(null==a?"":a)+b};f.all=Aa;f.any=$a;f.detect=sa;f.findWhere=sa;f.foldl=ua;f.foldr=Ea;f.include=
Za;f.inject=ua;D(f,function(a,b){f.prototype[b]||(f.prototype[b]=function(){var b=[this.__wrapped__];hb.apply(b,arguments);return a.apply(f,b)})});f.first=va;f.last=function(a,b,c){if(a){var e=0,d=a.length;if("number"!=typeof b&&null!=b)for(var g=d,b=f.createCallback(b,c);g--&&b(a[g],g,a);)e++;else if(e=b,null==e||c)return a[d-1];return o(a,aa(0,d-e))}};f.take=va;f.head=va;D(f,function(a,b){f.prototype[b]||(f.prototype[b]=function(b,c){var e=a(this.__wrapped__,b,c);return null==b||c&&"function"!=
typeof b?e:new l(e)})});f.VERSION="1.3.1";f.prototype.toString=function(){return da(this.__wrapped__)};f.prototype.value=xb;f.prototype.valueOf=xb;w(["join","pop","shift"],function(a){var b=M[a];f.prototype[a]=function(){return b.apply(this.__wrapped__,arguments)}});w(["push","reverse","sort","unshift"],function(a){var b=M[a];f.prototype[a]=function(){b.apply(this.__wrapped__,arguments);return this}});w(["concat","slice","splice"],function(a){var b=M[a];f.prototype[a]=function(){return new l(b.apply(this.__wrapped__,
arguments))}});return f}var O,I=[],l=[],qa=0,q={},z=+new Date+"",A=75,r=40,s=/\b__p \+= '';/g,E=/\b(__p \+=) '' \+/g,C=/(__e\(.*?\)|\b__t\)) \+\n'';/g,u=/&(?:amp|lt|gt|quot|#39);/g,xa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ra=/\w*$/,Sa=/<%=([\s\S]+?)%>/g,ia=(ia=/\bthis\b/)&&ia.test(p)&&ia,ya=" \t\u000b\u000c\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",Ta=RegExp("^["+ya+"]*0+(?=.$)"),ba=/($^)/,F=/[&<>"']/g,Ka=/['\n\r\t\u2028\u2029\\]/g,
ja="Array,Boolean,Date,Function,Math,Number,Object,RegExp,String,_,attachEvent,clearTimeout,isFinite,isNaN,parseInt,setImmediate,setTimeout".split(","),za=0,V="[object Arguments]",ra="[object Array]",ca="[object Boolean]",ka="[object Date]",La="[object Function]",Q="[object Number]",L="[object Object]",ha="[object RegExp]",U="[object String]",x={};x[La]=!1;x[V]=x[ra]=x[ca]=x[ka]=x[Q]=x[L]=x[ha]=x[U]=!0;var B={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},y={"\\":"\\","'":"'",
"\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},la=B[typeof exports]&&exports,ma=B[typeof module]&&module&&module.exports==la&&module,Z=B[typeof global]&&global;if(Z&&(Z.global===Z||Z.window===Z))d=Z;var P=p();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(d._=P,define(function(){return P})):la&&!la.nodeType?ma?(ma.exports=P)._=P:la._=P:d._=P})(this)},"game/draw":function(){define(["lodash"],function(d){return function(i){d.forEach(this.anims,function(d){var b=d.getCurrentFrame(),
j=d.frames.length;d.draw(i,d.image.width/j*b.imgSlotX,d.image.height/j*b.imgSlotY)})}})},"frozen/GameCore":function(){define("dcl,dcl/advise,dcl/bases/Mixer,lodash,./InputManager,./ResourceManager,./shims/RAF".split(","),function(d,i,h,b,j,n){return d(h,{statics:{FONT_SIZE:24},isRunning:!1,canvasId:null,maxStep:40,contextType:"2d",height:0,width:0,resourceManager:null,inputManager:null,loadingForeground:"#00F",loadingBackground:"#FFF",gameAreaId:null,canvasPercentage:0,requestId:null,constructor:function(){var b=
this.preUpdate||this.beforeUpdate;b&&i.before(this,"update",b)},setHeight:function(b){this.height=b;this.canvas.height=b},setWidth:function(b){this.width=b;this.canvas.width=b},stop:function(){window.cancelAnimationFrame(this.requestId);this.requestId=null;this.isRunning=!1},run:function(){this.isRunning||(this.init(),this.loadResources(this.resourceManager),this.initInput(this.inputManager),this.launchLoop())},loadResources:function(){},init:function(){if(!this.canvas)this.canvas=document.getElementById(this.canvasId);
if(this.canvas){if(!this.context)this.context=this.canvas.getContext(this.contextType);if(this.context){this.setHeight(this.height||this.canvas.height);this.setWidth(this.width||this.canvas.width);if(!this.inputManager)this.inputManager=this.gameAreaId&&this.canvasPercentage?new j({canvas:this.canvas,gameArea:document.getElementById(this.gameAreaId),canvasPercentage:this.canvasPercentage}):new j({canvas:this.canvas});this.inputManager.resize();if(!this.resourceManager)this.resourceManager=new n;this.loadResources(this.resourceManager);
this.isRunning=!0}else alert("Sorry, your browser does not support a "+this.contextType+" drawing surface on canvas.  I recommend any browser but Internet Explorer")}else alert("Sorry, your browser does not support canvas.  I recommend any browser but Internet Explorer")},initInput:function(){},handleInput:function(){},gameLoop:function(){this.currTime=(new Date).getTime();this.elapsedTime=Math.min(this.currTime-this.prevTime,this.maxStep);this.prevTime=this.currTime;this.resourceManager&&!this.resourceManager.resourcesReady()?
(this.updateLoadingScreen(this.elapsedTime),this.drawLoadingScreen(this.context)):(this.handleInput(this.inputManager,this.elapsedTime),this.paused||this.update(this.elapsedTime),this.context.save(),this.draw(this.context),this.context.restore())},launchLoop:function(){this.elapsedTime=0;var d=Date.now();this.prevTime=this.currTime=d;this.loopRunner=b.bind(this.loopRunner,this);this.requestId=window.requestAnimationFrame(this.loopRunner)},loopRunner:function(){this.gameLoop();this.requestId=window.requestAnimationFrame(this.loopRunner)},
update:function(){},updateLoadingScreen:function(){},draw:function(b){if("2d"===this.contextType)b.font="14px sans-serif",b.fillText("This game does not have its own draw function!",10,50)},drawLoadingScreen:function(b){if(this.resourceManager&&"2d"===this.contextType)b.fillStyle=this.loadingBackground,b.fillRect(0,0,this.width,this.height),b.fillStyle=this.loadingForeground,b.strokeStyle=this.loadingForeground,b.font="bold "+Math.floor(this.height/12)+"px sans-serif",b.fillText("Loading... "+this.resourceManager.getPercentComplete()+
"%",0.1*this.width,0.55*this.height),b.strokeRect(0.1*this.width,0.7*this.height,0.8*this.width,0.1*this.height),b.fillRect(0.1*this.width,0.7*this.height,0.8*this.width*this.resourceManager.getPercentComplete()/100,0.1*this.height),b.lineWidth=4}})})},"dcl/dcl":function(){(function(d){"undefined"!=typeof define?define(["./mini"],d):"undefined"!=typeof module?module.exports=d(require("./mini")):dcl=d(dcl)})(function(d){function i(){}function h(b,d,a){var c=b||i,h=d||i,j=a||i,e=function(){var a;c.apply(this,
arguments);try{a=j.apply(this,arguments)}catch(b){a=b}h.call(this,arguments,a);if(a instanceof Error)throw a;return a};e.advices={b:b,a:d,f:a};return e}function b(b){return function(g,a){var c=g._m,h;c&&((h=+c.w[a]||0)&&h!=b&&d._e("set chaining",a,g,b,h),c.w[a]=b)}}var j=d(d.Super,{constructor:function(){this.b=this.f.before;this.a=this.f.after;this.f=this.f.around}});d.mix(d,{Advice:j,advise:function(b){return new j(b)},before:function(b){return new j({before:b})},after:function(b){return new j({after:b})},
around:d.superCall,chainBefore:b(1),chainAfter:b(2),isInstanceOf:function(b,d){if(b instanceof d)return!0;var a=b.constructor._m,c;if(a)for(a=a.b,c=a.length-1;0<=c;--c)if(a[c]===d)return!0;return!1},_sb:function(b,g,a,c){var c=c[a]=d._ec(g,a,"f"),j=d._ec(g,a,"b").reverse(),g=d._ec(g,a,"a"),c=b?d._st(c,1==b?function(a){return d._sc(a.reverse())}:d._sc,a):d._ss(c,a);return!j.length&&!g.length?c||function(){}:h(d._sc(j),d._sc(g),c)}});return d})},"dcl/mini":function(){(function(d){"undefined"!=typeof define?
define([],d):"undefined"!=typeof module?module.exports=d():dcl=d()})(function(){function d(a,e){var g=[0],l,k,m,i,o,r,s,E,C=0,u;if(a)if(a instanceof Array){i={};s=a.slice(0).reverse();for(E=s.length-1;0<=E;--E)if(k=s[E],k._u=k._u||b++,l=k._m){for(r=l.b,C=r.length-1;0<C;--C)u=r[C]._u,i[u]=(i[u]||0)+1;s[E]=r.slice(0)}else s[E]=[k];o={};a:for(;s.length;){for(E=0;E<s.length;++E)if(r=s[E],k=r[0],u=k._u,!i[u]){o[u]||(g.push(k),o[u]=1);r.shift();r.length?--i[r[0]._u]:s.splice(E,1);continue a}d._e("cycle",
e,s)}a=a[0];C=g.length-((i=a._m)&&a===g[g.length-(C=i.b.length)]?C:1)-1}else a._u=a._u||b++,g=g.concat((i=a._m)?i.b:a);l=a?d.delegate(a[n]):{};for(r=a&&(i=a._m)?d.delegate(i.w):{constructor:2};0<C;--C)if(k=g[C],i=k._m,c(l,i&&i.h||k[n]),i)for(u in s=i.w)r[u]=(+r[u]||0)|s[u];for(u in e)h(i=e[u])?r[u]=+r[u]||0:l[u]=i;o={b:g,h:e,w:r,c:{}};g[0]={_m:o,prototype:l};k=l;i=o.w;r=o.b;s=o.c;for(m in i)k[m]=d._sb(i[m],r,m,s);m=l[j];m._m=o;m[n]=l;g[0]=m;return d._p(m)}function i(a){this.f=a}function h(a){return a instanceof
i}var b=0,j="constructor",n="prototype",g=function(){},a={},c,k,m,e,o;(c=function(a,b){for(var c in b)a[c]=b[c]})(d,{mix:c,delegate:function(a){g[n]=a;a=new g;g[n]=null;return a},Super:i,superCall:function(a){return new i(a)},_p:function(a){return a},_e:function(a){throw Error("dcl: "+a);},_f:function(a,b){var c=a.f(b);c.ctr=a.ctr;return c},_ec:k=function(b,c,e){for(var d=b.length-1,g=[],k,j,m="f"==e;k=b[d];--d)if((j=k._m)?(j=j.h).hasOwnProperty(c)&&(h(j=j[c])?m?j.f:j=j[e]:m):m&&(j=k[n][c])&&j!==
a[c])j.ctr=k,g.push(j);return g},_sc:e=function(a){var b=a.length,c;return!b?0:1==b?(c=a[0],function(){c.apply(this,arguments)}):function(){for(var c=0;c<b;++c)a[c].apply(this,arguments)}},_ss:m=function(b,c){for(var e=0,g,k=a[c];g=b[e];++e)k=h(g)?b[e]=d._f(g,k,c):g;return c!=j?k:function(){k.apply(this,arguments)}},_st:o=function(a,b,c){for(var e=0,g,k,m=0;g=a[e];++e)h(g)&&(k=e-m,a[e]=d._f(g,!k?0:1==k?a[m]:b(a.slice(m,e)),c),m=e);k=e-m;return!k?0:1==k&&c!=j?a[m]:b(m?a.slice(m):a)},_sb:function(a,
b,c,d){b=d[c]=k(b,c,"f");return(a?o(b,e,c):m(b,c))||function(){}}});return d})},"dcl/advise":function(){(function(d){"undefined"!=typeof define?define([],d):"undefined"!=typeof module?module.exports=d():advise=d()})(function(){function d(b,d){this.nb=this.pb=this.na=this.pa=this.nf=this.pf=this;this.i=b;this.n=d}function i(b){var d=function(){var d,a,c=arguments;for(d=b.pb;d!==b;d=d.pb)d.b.apply(this,c);try{b.pf!==b&&(a=b.pf.f.apply(this,c))}catch(k){a=k}for(d=b.na;d!==b;d=d.na)d.a.call(this,c,a);
if(a instanceof Error)throw a;return a};d.adviceNode=b;return d}function h(b,h,g){var a=b[h],c;a&&a.adviceNode&&a.adviceNode instanceof d?c=a.adviceNode:(c=new d(b,h),a&&a.advices?(a=a.advices,c.a(a.b,a.a,a.f)):c.a(0,0,a),b[h]=i(c));"function"==typeof g&&(g=g(h,b));return c.a(g.before,g.after,0,g.around)}var b=d.prototype={a:function(b,i,g,a){var c=new d(this.i,this.n);c.p=this;c.b=b;this._a("b",c);c.a=i;this._a("a",c);c.f=g;this._a("f",c,a);if(c.o=a)c.f=h._f(a,c.pf.f,this);return c},_a:function(b,
d,g){if(d[b]||g)g="n"+b,b="p"+b,(d[b]=this[b])[g]=(d[g]=this)[b]=d},r:function(b){this._r("b",b);this._r("a",b);this._r("f",b)},_r:function(b,d){var g="n"+b,a="p"+b;d[g][a]=d[a];d[a][g]=d[g]},destroy:function(){var b=this.pf.f,d=this.nf,g=this.p;this.r(this);if(d!==this)for(;d!==g;b=d.f,d=d.nf)if(d.o)d.f=h._f(d.o,b,this);this.i=0}};b.unadvise=b.destroy;h.before=function(b,d,g){return h(b,d,{before:g})};h.after=function(b,d,g){return h(b,d,{after:g})};h.around=function(b,d,g){return h(b,d,{around:g})};
h.Node=d;h._f=function(b,d){return b(d)};return h})},"dcl/bases/Mixer":function(){(function(d){"undefined"!=typeof define?define(["../mini"],d):"undefined"!=typeof module?module.exports=d(require("../mini")):dclBasesMixer=d(dcl)})(function(d){return d(null,{declaredClass:"dcl/bases/Mixer",constructor:function(i){d.mix(this,i)}})})},"frozen/InputManager":function(){define("./GameAction,./MouseAction,./TouchAction,./utils/insideCanvas,dcl,dcl/bases/Mixer,dcl/mixins/Cleanup,dojo/has,dojo/on,lodash,hammer,dojo/domReady!".split(","),
function(d,i,h,b,j,n,g,a,c,k,m){return j([n,g],{keyActions:null,mouseAction:null,touchAction:null,canvas:null,handleMouse:!0,handleTouch:!0,handleKeys:!0,gameArea:null,canvasPercentage:null,emulateMouse:!0,hammer:null,on:function(a,b){var c=this.hammer,d=this.removeCleanup;c.on(a,b);var g=this.pushCleanup([a,b],function(a){c.off.apply(c,a)});return{remove:function(){d(g);g()}}},constructor:function(){function a(b){b.remove()}k.bindAll(this);if(!this.hammer)this.hammer=m(document,{drag_max_touches:0,
hold:!1});if(!this.keyActions)this.keyActions={};this.handleKeys&&(this.pushCleanup(c(document,"keydown",this.keydown),a),this.pushCleanup(c(document,"keyup",this.keyup),a));if(this.emulateMouse){if(this.on("touch",this.mousedown),this.on("drag",this.mousemove),this.on("release",this.mouseup),!this.mouseAction)this.mouseAction=new i}else if(this.on("touch",this.touchstart),this.on("drag",this.touchmove),this.on("release",this.touchend),!this.touchAction)this.touchAction=new h;this.gameArea&&this.canvasPercentage&&
(this.pushCleanup(c(window,"resize",this.resize),a),this.pushCleanup(c(window,"orientationchange",this.resize),a))},insideCanvas:function(a){return b(a,this.canvas)},mapToKey:function(a,b){this.keyActions[b]=a},addKeyAction:function(a,b){var c=new d;if(b)c.behavior=c.statics.DETECT_INITAL_PRESS_ONLY;this.mapToKey(c,a);return c},mouseUp:function(a){this.mouseup(a)},mouseup:function(a){this.mouseAction.release(this.normalizePoint(a.gesture.touches[0]))},mouseDown:function(a){this.mousedown(a)},mousedown:function(a){this.mouseAction.release(null);
a=this.normalizePoint(a.gesture.touches[0]);this.mouseAction.insideCanvas=this.insideCanvas(a);this.mouseAction.press(a)},mouseMove:function(a){this.mousemove(a)},mousemove:function(a){this.mouseAction.position=this.normalizePoint(a.gesture?a.gesture.touches[0]:a)},touchStart:function(a){this.touchstart(a)},touchstart:function(a){this.touchAction.release(null);a=k.map(a.gesture.touches,this.normalizePoint);this.touchAction.insideCanvas=k.some(a,this.insideCanvas);this.touchAction.press(a)},touchEnd:function(a){this.touchend(a)},
touchend:function(a){this.touchAction.release(k.map(a.gesture.touches,this.normalizePoint))},touchMove:function(a){this.touchmove(a)},touchmove:function(a){this.touchAction.positions=k.map(a.gesture.touches,this.normalizePoint);this.touchAction.startPositions&&a.preventDefault()},getKeyAction:function(a){return this.keyActions?this.keyActions[a.keyCode]||this.keyActions[String.fromCharCode(a.keyCode)]:null},keyPressed:function(a){this.keydown(a)},keyDown:function(a){this.keydown(a)},keydown:function(a){(a=
this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyReleased:function(a){this.keyup(a)},keyup:function(a){(a=this.getKeyAction(a))&&a.release()},getMouseLoc:function(a){return this.normalizePoint(a)},normalizePoint:function(a){var b,c;c=this.canvas.getBoundingClientRect();b=c.left;c=c.top;return this.zoomRatio?{x:Math.round((a.clientX-b)/this.zoomRatio),y:Math.round((a.clientY-c)/this.zoomRatio)}:{x:Math.round(a.clientX-b),y:Math.round(a.clientY-c)}},resize:function(){var a,b;if(this.gameArea&&this.canvasPercentage&&
this.canvas){var c=this.canvas.width,d=this.canvas.height,g=window.getComputedStyle(document.body,null)||{};a=parseFloat(g.marginLeft)||0;var k=parseFloat(g.marginTop)||0;b=parseFloat(g.marginRight)||0;g=parseFloat(g.marginBottom)||0;a+=b;b=k+g;k=window.innerWidth-a;a=window.innerHeight-b;d=c/d;g=b="";k/a>d?(k=a*d,b=k+"px",g=a+"px"):(b=k+"px",g=Math.round(k/d)+"px");this.zoomRatio=k/c*this.canvasPercentage;this.gameArea.style.width=b;this.gameArea.style.height=g;c=Math.floor(100*this.canvasPercentage)+
"%";this.canvas.style.width=c;this.canvas.style.height=c;this.canvas.style.display="block";this.canvas.style.marginLeft="auto";this.canvas.style.marginRight="auto"}}})})},"frozen/GameAction":function(){define(["dcl","dcl/bases/Mixer"],function(d,i){return d(i,{name:null,behavior:0,amount:0,state:0,statics:{NORMAL:0,DETECT_INITAL_PRESS_ONLY:1,STATE_RELEASED:0,STATE_PRESSED:1,STATE_WAITING_FOR_RELEASE:2,STATE_MOVED:3},constructor:function(){this.reset()},reset:function(){this.state=this.statics.STATE_RELEASED;
this.amount=0},tap:function(){this.press();this.release()},press:function(){this.state=this.statics.STATE_PRESSED;this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY&&this.pressAmt(1)},pressAmt:function(d){if(this.state!==this.statics.STATE_WAITING_FOR_RELEASE)this.amount+=d,this.state=this.statics.STATE_WAITING_FOR_RELEASE},release:function(){this.state=this.statics.STATE_RELEASED},isPressed:function(){return this.state===this.statics.STATE_PRESSED?!0:!1},getAmount:function(){var d=this.amount;
if(0!==d)if(this.state===this.statics.STATE_RELEASED)this.amount=0;else if(this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY)this.state=this.statics.STATE_WAITING_FOR_RELEASE,this.amount=0;return d}})})},"frozen/MouseAction":function(){define(["dcl","./GameAction"],function(d,i){return d(i,{startPosition:null,endPosition:null,position:null,insideCanvas:null,press:d.superCall(function(d){return function(b){this.position=this.startPosition=b;d.apply(this)}}),release:d.superCall(function(d){return function(b){this.endPosition=
b;d.apply(this)}})})})},"frozen/TouchAction":function(){define(["dcl","./GameAction"],function(d,i){return d(i,{startPositions:null,endPositions:null,positions:null,insideCanvas:null,press:d.superCall(function(d){return function(b){this.positions=this.startPositions=b;d.apply(this)}}),release:d.superCall(function(d){return function(b){this.endPositions=b;d.apply(this)}})})})},"frozen/utils/insideCanvas":function(){define(function(){return function(d,i){return 0>d.x||d.x>i.width||0>d.y||d.y>i.height?
!1:!0}})},"dcl/mixins/Cleanup":function(){(function(d){"undefined"!=typeof define?define(["../dcl","./Destroyable"],d):"undefined"!=typeof module?module.exports=d(require("../dcl"),require("./Destroyable")):dclMixinsCleanup=d(dcl,dclMixinsDestroyable)})(function(d,i){return d(i,{declaredClass:"dcl/mixins/Cleanup",constructor:function(){this.__cleanupStack=[]},pushCleanup:function(d,b){var j=b?function(){b(d)}:function(){d.destroy()};this.__cleanupStack.push(j);return j},popCleanup:function(d){if(d)return this.__cleanupStack.pop();
this.__cleanupStack.pop()()},removeCleanup:function(d){for(var b=this.__cleanupStack.length-1;0<=b;--b)if(this.__cleanupStack[b]===d)return this.__cleanupStack.splice(b,1),!0},cleanup:function(){for(;this.__cleanupStack.length;)this.__cleanupStack.pop()()},destroy:function(){this.cleanup()}})})},"dcl/mixins/Destroyable":function(){(function(d){"undefined"!=typeof define?define(["../dcl"],d):"undefined"!=typeof module?module.exports=d(require("../dcl")):dclMixinsDestroyable=d(dcl)})(function(d){var i=
d(null,{declaredClass:"dcl/mixins/Destroyable"});d.chainBefore(i,"destroy");return i})},"dojo/has":function(){define(["require","module"],function(d){var i=d.has||function(){};i.add("touch","ontouchstart"in document);i.add("device-width",screen.availWidth||innerWidth);d=document.createElement("form");i.add("dom-attributes-explicit",0==d.attributes.length);i.add("dom-attributes-specified-flag",0<d.attributes.length&&40>d.attributes.length);i.clearElement=function(d){d.innerHTML="";return d};i.normalize=
function(d,b){var j=d.match(/[\?:]|[^:\?]*/g),n=0,g=function(a){var b=j[n++];if(":"==b)return 0;if("?"==j[n++]){if(!a&&i(b))return g();g(!0);return g(a)}return b||0};return(d=g())&&b(d)};i.load=function(d,b,j){d?b([d],j):j()};return i})},"dojo/on":function(){define(["require","./_base/kernel","./has"],function(d,i,h){function b(b,c,d,e,k){if(e=c.match(/(.*):(.*)/))return c=e[2],e=e[1],g.selector(e,c).call(k,b,d);h("touch")&&(a.test(c)&&(d=I(d)),!h("event-orientationchange")&&"orientationchange"==
c&&(c="resize",b=window,d=I(d)));o&&(d=o(d));if(b.addEventListener){var j=c in m,i=j?m[c]:c;b.addEventListener(i,d,j);return{remove:function(){b.removeEventListener(i,d,j)}}}c="on"+c;throw Error("Target must be an event emitter");}function j(){this.cancelable=!1}function n(){this.bubbles=!1}d=window.ScriptEngineMajorVersion;h.add("jscript",d&&d()+ScriptEngineMinorVersion()/10);h.add("event-orientationchange",h("touch")&&!h("android"));h.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&
!!window.Event.prototype.stopImmediatePropagation);var g=function(a,c,d,e){return"function"==typeof a.on&&"function"!=typeof c?a.on(c,d):g.parse(a,c,d,b,e,this)};g.pausable=function(a,b,c,d){var e,a=g(a,b,function(){if(!e)return c.apply(this,arguments)},d);a.pause=function(){e=!0};a.resume=function(){e=!1};return a};g.once=function(a,b,c){var d=g(a,b,function(){d.remove();return c.apply(this,arguments)});return d};g.parse=function(a,b,c,d,e,g){if(b.call)return b.call(g,a,c);if(-1<b.indexOf(",")){for(var b=
b.split(/\s*,\s*/),k=[],m=0,h;h=b[m++];)k.push(d(a,h,c,e,g));k.remove=function(){for(var a=0;a<k.length;a++)k[a].remove()};return k}return d(a,b,c,e,g)};var a=/^touch/;g.selector=function(a,b,c){return function(d,e){function k(b){for(m=m&&m.matches?m:i.query;!m.matches(b,a,d);)if(b==d||!1===c||!(b=b.parentNode)||1!=b.nodeType)return;return b}var m="function"==typeof a?{matches:a}:this,h=b.bubble;return h?g(d,h(k),e):g(d,b,function(a){var b=k(a.target);return b&&e.call(b,a)})}};var c=[].slice,k=g.emit=
function(a,b,d){var e=c.call(arguments,2),g="on"+b;if("parentNode"in a){var k=e[0]={},m;for(m in d)k[m]=d[m];k.preventDefault=j;k.stopPropagation=n;k.target=a;k.type=b;d=k}do a[g]&&a[g].apply(a,e);while(d&&d.bubbles&&(a=a.parentNode));return d&&d.cancelable&&d},m={};if(!h("event-stopimmediatepropagation"))var e=function(){this.modified=this.immediatelyStopped=!0},o=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=e,a.apply(this,arguments)}};m={focusin:"focus",
focusout:"blur"};g.emit=function(a,b,c){if(a.dispatchEvent&&document.createEvent){var d=a.ownerDocument.createEvent("HTMLEvents");d.initEvent(b,!!c.bubbles,!!c.cancelable);for(var e in c)e in d||(d[e]=c[e]);return a.dispatchEvent(d)&&d}return k.apply(g,arguments)};if(h("touch"))var p=function(){},O=window.orientation,I=function(a){return function(b){var c=b.corrected;if(!c){var d=b.type;try{delete b.type}catch(e){}b.type?(p.prototype=b,c=new p,c.preventDefault=function(){b.preventDefault()},c.stopPropagation=
function(){b.stopPropagation()}):(c=b,c.type=d);b.corrected=c;if("resize"==d){if(O==window.orientation)return null;O=window.orientation;c.type="orientationchange";return a.call(this,c)}if(!("rotation"in c))c.rotation=0,c.scale=1;var d=c.changedTouches[0],g;for(g in d)delete c[g],c[g]=d[g]}return a.call(this,c)}};return g})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(d,i,h,b){var j,d={},n={},g={config:i,global:this,dijit:d,dojox:n},d={dojo:["dojo",g],dijit:["dijit",
d],dojox:["dojox",n]},b=h.map&&h.map[b.id.match(/[^\/]+/)[0]];for(j in b)d[j]?d[j][0]=b[j]:d[j]=[b[j],{}];for(j in d)b=d[j],b[1]._scopeName=b[0],i.noGlobals||(this[b[0]]=b[1]);g.scopeMap=d;g.baseUrl=g.config.baseUrl=h.baseUrl;g.isAsync=h.async;g.locale=i.locale;i="$Rev$".match(/\d+/);g.version={major:1,minor:8,patch:3,flag:"",revision:i?+i[0]:NaN,toString:function(){var a=g.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(g);
g.exit=function(){};g.deprecated=g.experimental=function(){};g._hasResource={};return g})},"dojo/_base/config":function(){define(["../has","require"],function(d,i){var h={},b=i.rawConfig,j;for(j in b)h[j]=b[j];return h})},"hammer/hammer":function(){(function(d,i){function h(){if(!b.READY){b.event.determineEventTypes();for(var a in b.gestures)b.gestures.hasOwnProperty(a)&&b.detection.register(b.gestures[a]);b.event.onTouch(b.DOCUMENT,b.EVENT_MOVE,b.detection.detect);b.event.onTouch(b.DOCUMENT,b.EVENT_END,
b.detection.detect);b.READY=!0}}var b=function(a,c){return new b.Instance(a,c||{})};b.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};b.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;b.HAS_TOUCHEVENTS="ontouchstart"in d;b.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;b.NO_MOUSEEVENTS=b.HAS_TOUCHEVENTS&&navigator.userAgent.match(b.MOBILE_REGEX);b.EVENT_TYPES=
{};b.DIRECTION_DOWN="down";b.DIRECTION_LEFT="left";b.DIRECTION_UP="up";b.DIRECTION_RIGHT="right";b.POINTER_MOUSE="mouse";b.POINTER_TOUCH="touch";b.POINTER_PEN="pen";b.EVENT_START="start";b.EVENT_MOVE="move";b.EVENT_END="end";b.DOCUMENT=document;b.plugins={};b.READY=!1;b.Instance=function(a,c){var d=this;h();this.element=a;this.enabled=!0;this.options=b.utils.extend(b.utils.extend({},b.defaults),c||{});this.options.stop_browser_behavior&&b.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior);
b.event.onTouch(a,b.EVENT_START,function(a){d.enabled&&b.detection.startDetect(d,a)});return this};b.Instance.prototype={on:function(a,b){for(var d=a.split(" "),g=0;g<d.length;g++)this.element.addEventListener(d[g],b,!1);return this},off:function(a,b){for(var d=a.split(" "),g=0;g<d.length;g++)this.element.removeEventListener(d[g],b,!1);return this},trigger:function(a,c){var d=b.DOCUMENT.createEvent("Event");d.initEvent(a,!0,!0);d.gesture=c;var g=this.element;if(b.utils.hasParent(c.target,g))g=c.target;
g.dispatchEvent(d);return this},enable:function(a){this.enabled=a;return this}};var j=null,n=!1,g=!1;b.event={bindDom:function(a,b,d){for(var b=b.split(" "),g=0;g<b.length;g++)a.addEventListener(b[g],d,!1)},onTouch:function(a,c,d){var h=this;this.bindDom(a,b.EVENT_TYPES[c],function(e){var i=e.type.toLowerCase();if(!i.match(/mouse/)||!g){i.match(/touch/)||i.match(/pointerdown/)||i.match(/mouse/)&&1===e.which?n=!0:i.match(/mouse/)&&1!==e.which&&(n=!1);i.match(/touch|pointer/)&&(g=!0);var p=0;if(n){b.HAS_POINTEREVENTS&&
c!=b.EVENT_END?p=b.PointerEvent.updatePointer(c,e):i.match(/touch/)?p=e.touches.length:g||(p=i.match(/up/)?0:1);if(0<p&&c==b.EVENT_END)c=b.EVENT_MOVE;else if(!p)c=b.EVENT_END;!p&&null!==j?e=j:j=e;d.call(b.detection,h.collectEventData(a,c,e));b.HAS_POINTEREVENTS&&c==b.EVENT_END&&(p=b.PointerEvent.updatePointer(c,e))}p||(j=null,g=n=!1,b.PointerEvent.reset())}})},determineEventTypes:function(){var a;a=b.HAS_POINTEREVENTS?b.PointerEvent.getEvents():b.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:
["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"];b.EVENT_TYPES[b.EVENT_START]=a[0];b.EVENT_TYPES[b.EVENT_MOVE]=a[1];b.EVENT_TYPES[b.EVENT_END]=a[2]},getTouchList:function(a){if(b.HAS_POINTEREVENTS)return b.PointerEvent.getTouchList();if(a.touches)return a.touches;a.indentifier=1;return[a]},collectEventData:function(a,c,d){var a=this.getTouchList(d,c),g=b.POINTER_TOUCH;if(d.type.match(/mouse/)||b.PointerEvent.matchType(b.POINTER_MOUSE,d))g=b.POINTER_MOUSE;return{center:b.utils.getCenter(a),
timeStamp:(new Date).getTime(),target:d.target,touches:a,eventType:c,pointerType:g,srcEvent:d,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation();this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return b.detection.stopDetect()}}}};b.PointerEvent={pointers:{},getTouchList:function(){var a=this,b=[];Object.keys(a.pointers).sort().forEach(function(d){b.push(a.pointers[d])});
return b},updatePointer:function(a,c){a==b.EVENT_END?this.pointers={}:(c.identifier=c.pointerId,this.pointers[c.pointerId]=c);return Object.keys(this.pointers).length},matchType:function(a,c){if(!c.pointerType)return!1;var d={};d[b.POINTER_MOUSE]=c.pointerType==c.MSPOINTER_TYPE_MOUSE||c.pointerType==b.POINTER_MOUSE;d[b.POINTER_TOUCH]=c.pointerType==c.MSPOINTER_TYPE_TOUCH||c.pointerType==b.POINTER_TOUCH;d[b.POINTER_PEN]=c.pointerType==c.MSPOINTER_TYPE_PEN||c.pointerType==b.POINTER_PEN;return d[a]},
getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}};b.utils={extend:function(a,b,d){for(var g in b)a[g]!==i&&d||(a[g]=b[g]);return a},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){for(var b=[],d=[],g=0,e=a.length;g<e;g++)b.push(a[g].pageX),d.push(a[g].pageY);return{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,
d)+Math.max.apply(Math,d))/2}},getVelocity:function(a,b,d){return{x:Math.abs(b/a)||0,y:Math.abs(d/a)||0}},getAngle:function(a,b){return 180*Math.atan2(b.pageY-a.pageY,b.pageX-a.pageX)/Math.PI},getDirection:function(a,c){var d=Math.abs(a.pageX-c.pageX),g=Math.abs(a.pageY-c.pageY);return d>=g?0<a.pageX-c.pageX?b.DIRECTION_LEFT:b.DIRECTION_RIGHT:0<a.pageY-c.pageY?b.DIRECTION_UP:b.DIRECTION_DOWN},getDistance:function(a,b){var d=b.pageX-a.pageX,g=b.pageY-a.pageY;return Math.sqrt(d*d+g*g)},getScale:function(a,
b){return 2<=a.length&&2<=b.length?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return 2<=a.length&&2<=b.length?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==b.DIRECTION_UP||a==b.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){var d,g="webkit,khtml,moz,ms,o,".split(",");if(b&&a.style){for(var e=0;e<g.length;e++)for(var h in b)b.hasOwnProperty(h)&&(d=h,g[e]&&(d=g[e]+d.substring(0,1).toUpperCase()+d.substring(1)),
a.style[d]=b[h]);if("none"==b.userSelect)a.onselectstart=function(){return!1}}}};b.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,c){if(!this.current)this.stopped=!1,this.current={inst:a,startEvent:b.utils.extend({},c),lastEvent:!1,name:""},this.detect(c)},detect:function(a){if(this.current&&!this.stopped){for(var a=this.extendEventData(a),c=this.current.inst.options,d=0,g=this.gestures.length;d<g;d++){var e=this.gestures[d];if(!this.stopped&&!1!==c[e.name]&&!1===
e.handler.call(e,a,this.current.inst)){this.stopDetect();break}}if(this.current)this.current.lastEvent=a;a.eventType==b.EVENT_END&&!a.touches.length-1&&this.stopDetect();return a}},stopDetect:function(){this.previous=b.utils.extend({},this.current);this.current=null;this.stopped=!0},extendEventData:function(a){var c=this.current.startEvent;if(c&&(a.touches.length!=c.touches.length||a.touches===c.touches)){c.touches=[];for(var d=0,g=a.touches.length;d<g;d++)c.touches.push(b.utils.extend({},a.touches[d]))}var d=
a.timeStamp-c.timeStamp,g=a.center.pageX-c.center.pageX,e=a.center.pageY-c.center.pageY,h=b.utils.getVelocity(d,g,e);b.utils.extend(a,{deltaTime:d,deltaX:g,deltaY:e,velocityX:h.x,velocityY:h.y,distance:b.utils.getDistance(c.center,a.center),angle:b.utils.getAngle(c.center,a.center),direction:b.utils.getDirection(c.center,a.center),scale:b.utils.getScale(c.touches,a.touches),rotation:b.utils.getRotation(c.touches,a.touches),startEvent:c});return a},register:function(a){var c=a.defaults||{};c[a.name]===
i&&(c[a.name]=!0);b.utils.extend(b.defaults,c,!0);a.index=a.index||1E3;this.gestures.push(a);this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0});return this.gestures}};b.gestures=b.gestures||{};b.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,c){switch(a.eventType){case b.EVENT_START:clearTimeout(this.timer);b.detection.current.name=this.name;this.timer=setTimeout(function(){"hold"==b.detection.current.name&&
c.trigger("hold",a)},c.options.hold_timeout);break;case b.EVENT_MOVE:a.distance>c.options.hold_threshold&&clearTimeout(this.timer);break;case b.EVENT_END:clearTimeout(this.timer)}}};b.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(a,c){if(a.eventType==b.EVENT_END){var d=b.detection.previous,g=!1;if(!(a.deltaTime>c.options.tap_max_touchtime||a.distance>c.options.tap_max_distance))if(d&&
"tap"==d.name&&a.timeStamp-d.lastEvent.timeStamp<c.options.doubletap_interval&&a.distance<c.options.doubletap_distance&&(c.trigger("doubletap",a),g=!0),!g||c.options.tap_always)b.detection.current.name="tap",c.trigger(b.detection.current.name,a)}}};b.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:0.7},handler:function(a,c){if(a.eventType==b.EVENT_END&&!(0<c.options.swipe_max_touches&&a.touches.length>c.options.swipe_max_touches)&&(a.velocityX>c.options.swipe_velocity||
a.velocityY>c.options.swipe_velocity))c.trigger(this.name,a),c.trigger(this.name+a.direction,a)}};b.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(a,c){if(b.detection.current.name!=this.name&&this.triggered)c.trigger(this.name+"end",a),this.triggered=!1;else if(!(0<c.options.drag_max_touches&&a.touches.length>
c.options.drag_max_touches))switch(a.eventType){case b.EVENT_START:this.triggered=!1;break;case b.EVENT_MOVE:if(a.distance<c.options.drag_min_distance&&b.detection.current.name!=this.name)break;if(b.detection.current.name!=this.name&&(b.detection.current.name=this.name,c.options.correct_for_drag_min_distance)){var d=Math.abs(c.options.drag_min_distance/a.distance);b.detection.current.startEvent.center.pageX+=a.deltaX*d;b.detection.current.startEvent.center.pageY+=a.deltaY*d;a=b.detection.extendEventData(a)}if(b.detection.current.lastEvent.drag_locked_to_axis||
c.options.drag_lock_to_axis&&c.options.drag_lock_min_distance<=a.distance)a.drag_locked_to_axis=!0;d=b.detection.current.lastEvent.direction;if(a.drag_locked_to_axis&&d!==a.direction)a.direction=b.utils.isVertical(d)?0>a.deltaY?b.DIRECTION_UP:b.DIRECTION_DOWN:0>a.deltaX?b.DIRECTION_LEFT:b.DIRECTION_RIGHT;if(!this.triggered)c.trigger(this.name+"start",a),this.triggered=!0;c.trigger(this.name,a);c.trigger(this.name+a.direction,a);(c.options.drag_block_vertical&&b.utils.isVertical(a.direction)||c.options.drag_block_horizontal&&
!b.utils.isVertical(a.direction))&&a.preventDefault();break;case b.EVENT_END:this.triggered&&c.trigger(this.name+"end",a),this.triggered=!1}}};b.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:0.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,c){if(b.detection.current.name!=this.name&&this.triggered)c.trigger(this.name+"end",a),this.triggered=!1;else if(!(2>a.touches.length))switch(c.options.transform_always_block&&a.preventDefault(),
a.eventType){case b.EVENT_START:this.triggered=!1;break;case b.EVENT_MOVE:var d=Math.abs(1-a.scale),g=Math.abs(a.rotation);if(d<c.options.transform_min_scale&&g<c.options.transform_min_rotation)break;b.detection.current.name=this.name;if(!this.triggered)c.trigger(this.name+"start",a),this.triggered=!0;c.trigger(this.name,a);g>c.options.transform_min_rotation&&c.trigger("rotate",a);d>c.options.transform_min_scale&&(c.trigger("pinch",a),c.trigger("pinch"+(1>a.scale?"in":"out"),a));break;case b.EVENT_END:this.triggered&&
c.trigger(this.name+"end",a),this.triggered=!1}}};b.gestures.Touch={name:"touch",index:-Infinity,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(a,c){c.options.prevent_mouseevents&&a.pointerType==b.POINTER_MOUSE?a.stopDetect():(c.options.prevent_default&&a.preventDefault(),a.eventType==b.EVENT_START&&c.trigger(this.name,a))}};b.gestures.Release={name:"release",index:Infinity,handler:function(a,c){a.eventType==b.EVENT_END&&c.trigger(this.name,a)}};"function"==typeof define&&"object"==
typeof define.amd&&define.amd?(d.Hammer=b,define(function(){return b})):"object"===typeof module&&"object"===typeof module.exports?module.exports=b:d.Hammer=b})(this)},"dojo/domReady":function(){define(["./has"],function(){function d(a){n?a(h):g.push(a)}var i=this,h=document,b={loaded:1,complete:1},j="string"!=typeof h.readyState,n=!!b[h.readyState];if(j)h.readyState="loading";if(!n){var g=[],a=[],c=function(a){a=a||i.event;if(!(n||"readystatechange"==a.type&&!b[h.readyState])){n=1;if(j)h.readyState=
"complete";for(;g.length;)g.shift()(h)}},k=function(a,b){a.addEventListener(b,c,!1);g.push(function(){a.removeEventListener(b,c,!1)})};k(h,"DOMContentLoaded");k(i,"load");"onreadystatechange"in h?k(h,"readystatechange"):j||a.push(function(){return b[h.readyState]});if(a.length){var m=function(){if(!n){for(var b=a.length;b--;)if(a[b]()){c("poller");return}setTimeout(m,30)}};m()}}d.load=function(a,b,c){d(c)};return d})},"frozen/ResourceManager":function(){define("require,./plugins/sound!,dcl,dcl/bases/Mixer,lodash,dojo/on".split(","),
function(d,i,h,b,j,n){function g(a,b){var c=b;a&&(c=[a,b].join("/"));return c.replace(/\/{2,}/g,"/")}function a(a){var b=document.createElement("canvas");b.height=a.height;b.width=a.width;var c=b.getContext("2d");c.translate(b.width,0);c.scale(-1,1);c.drawImage(a,0,0);return b.toDataURL()}function c(a){var b=document.createElement("canvas");b.height=a.height;b.width=a.width;var c=b.getContext("2d");c.translate(0,b.height);c.scale(1,-1);c.drawImage(a,0,0);return b.toDataURL()}var k=h(null,{name:"",
img:null,complete:!1,constructor:function(a){var b=this;b.name=a;b.img=new Image;n.once(b.img,"load",function(){b.complete=!0})},load:function(){this.img.src=d.toUrl(this.name)}});return h(b,{allLoaded:!1,imageDir:null,soundDir:null,resourceList:{},loadImage:function(a){var b=!1;if("object"!==typeof a)if("string"===typeof a)b=!0,a=[a];else return;var c=this,a=j.transform(a,function(a,b,d){b=g(c.imageDir,b);if(c.resourceList[b])return a[d]=c.resourceList[b].img;c.allLoaded=!1;var e=new k(b);e.load();
c.resourceList[b]=e;a[d]=e.img});return b?a[0]:a},loadSound:function(a){var b=!1;if("object"!==typeof a)if("string"===typeof a)b=!0,a=[a];else return;var c=this,a=j.transform(a,function(a,b,d){b=g(c.soundDir,b);if(c.resourceList[b])return a[d]=c.resourceList[b];c.allLoaded=!1;var e=new i(b);c.resourceList[b]=e;a[d]=e});return b?a[0]:a},flipImage:function(a,b,c){this.allLoaded=!1;var d=new k(a);this.resourceList[a]=d;n.once(b,"load",function(){d.img.src=c(b)});j.any(this.resourceList,function(a){if(a.img===
b&&a.complete)return d.img.src=c(b),!0});return d.img},flipImageX:function(b,c){return this.flipImage(b,c,a)},flipImageY:function(a,b){return this.flipImage(a,b,c)},resourcesReady:function(){if(!this.allLoaded){for(var a in this.resourceList)if(!this.resourceList[a].complete)return!1;this.allLoaded=!0}return!0},getPercentComplete:function(){var a=0,b=0,c;for(c in this.resourceList){var d=this.resourceList[c];b++;d.complete&&(a+=1)}return 0===b?0:Math.round(100*(a/b))}})})},"frozen/plugins/sound":function(){define(["../sounds/Sound",
"../sounds/WebAudio","../sounds/HTML5Audio","dojo/has"],function(d,i,h,b){return{load:function(j,n,g){return b("WebAudio")?g(i):b("HTML5Audio")?g(h):g(d)}}})},"frozen/sounds/Sound":function(){define(["dcl","dojo/has","dojo/sniff"],function(d,i){i.add("shittySound",function(){return!(!i("android")&&!i("ios")||!i("webkit"))});return d(null,{declaredClass:"frozen/sounds/Sound",name:null,complete:!1,formats:{"audio/mpeg":".mp3","audio/webm":".webm","audio/ogg":".ogg","audio/wav":".wav","audio/aac":".aac",
"audio/x-m4a":".m4a"},probably:null,maybe:null,constructor:function(d){if(!this.probably)this.probably=[];if(!this.maybe)this.maybe=[];"string"===typeof d&&this.load(d)},load:function(d){this.name=d;this.complete=!0},loop:function(){},play:function(){},_initAudio:function(){},_chooseFormat:function(){if(!this.probably.length&&!this.maybe.length){var d=new Audio,b,j;for(b in this.formats)j=d.canPlayType(b),"probably"===j?this.probably.push(this.formats[b]):"maybe"===j&&this.maybe.push(this.formats[b])}return this.probably.length?
this.probably[0]:this.maybe.length?this.maybe[0]:""},_nextFormat:function(){if(1<this.probably.length)return this.probably.shift(),this.probably[0];if(1===this.probably.length&&(this.probably.length=0,this.maybe.length))return this.maybe[0];if(1<this.maybe.length)return this.maybe.shift(),this.maybe[0];if(1===this.maybe.length)this.maybe.length=0;return""}})})},"dojo/sniff":function(){define(["./has"],function(d){var i=navigator,h=i.userAgent,i=i.appVersion,b=parseFloat(i);d.add("air",0<=h.indexOf("AdobeAIR"));
d.add("khtml",0<=i.indexOf("Konqueror")?b:void 0);d.add("webkit",parseFloat(h.split("WebKit/")[1])||void 0);d.add("chrome",parseFloat(h.split("Chrome/")[1])||void 0);d.add("safari",0<=i.indexOf("Safari")&&!d("chrome")?parseFloat(i.split("Version/")[1]):void 0);d.add("mac",0<=i.indexOf("Macintosh"));d.add("quirks","BackCompat"==document.compatMode);d.add("ios",/iPhone|iPod|iPad/.test(h));d.add("android",parseFloat(h.split("Android ")[1])||void 0);if(!d("webkit")){0<=h.indexOf("Opera")&&d.add("opera",
9.8<=b?parseFloat(h.split("Version/")[1])||b:b);0<=h.indexOf("Gecko")&&!d("khtml")&&!d("webkit")&&d.add("mozilla",b);d("mozilla")&&d.add("ff",parseFloat(h.split("Firefox/")[1]||h.split("Minefield/")[1])||void 0);if(document.all&&!d("opera"))h=parseFloat(i.split("MSIE ")[1])||void 0,(i=document.documentMode)&&5!=i&&Math.floor(h)!=i&&(h=i),d.add("ie",h);d.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return d})},"frozen/sounds/WebAudio":function(){define("require,./Sound,../utils/removeExtension,dcl,dojo/on,dojo/has,../shims/AudioContext".split(","),
function(d,i,h,b,j,n){n.add("WebAudio",function(a){return!!a.AudioContext});var g=null;if(n("WebAudio")&&(g=new window.AudioContext,n("shittySound")))j.once(document,"touchstart",function(){var a=g.createBufferSource();a.buffer=g.createBuffer(1,1,22050);a.connect(g.destination);a.noteOn(0)});return b(i,{declaredClass:"frozen/sounds/WebAudio",audioContext:g,buffer:null,load:function(a){var b=this;this.name=a;var g=h(a);g===a&&(a=g+this._chooseFormat());a=d.toUrl(a);g=new XMLHttpRequest;g.open("GET",
a,!0);g.responseType="arraybuffer";j.once(g,"load",function(a){b.audioContext.decodeAudioData(a.target.response,function(a){b.buffer=a;b.complete=!0},function(){b._nextFormat()?b.load(b.name):b.complete=!0})});g.send()},loop:function(a){this.buffer&&this._initAudio(a,!0).noteOn(0)},play:function(a,b){this.buffer&&this._initAudio(a,!1).noteOn(b||0)},_initAudio:function(a,b){var b="boolean"===typeof b?b:!1,d=this.audioContext.createBufferSource();d.buffer=this.buffer;d.loop=b;if(a){var g=this.audioContext.createGainNode();
g.gain.value=a;d.connect(g);g.connect(this.audioContext.destination)}else d.connect(this.audioContext.destination);return d}})})},"frozen/utils/removeExtension":function(){define(function(){return function(d){return d.replace(/(.*)\.[^.]{1,4}$/,"")}})},"frozen/shims/AudioContext":function(){define(function(){for(var d=["ms","moz","webkit","o"],i=0;i<d.length&&!window.AudioContext;++i)window.AudioContext=window[d[i]+"AudioContext"]})},"frozen/sounds/HTML5Audio":function(){define("require,./Sound,../utils/removeExtension,dcl,dojo/on,dojo/has".split(","),
function(d,i,h,b,j,n){n.add("HTML5Audio",function(b){return!!b.Audio});return b(i,{declaredClass:"frozen/sounds/HTML5Audio",audio:null,load:function(b){this.audio=new Audio;var a=this;this.name=b;var c=h(b);c===b&&(b=c+this._chooseFormat());b=d.toUrl(b);if(n("shittySound"))j.once(document,"touchstart",function(){var b=a.audio.volume;a.audio.volume=0;a.audio.play();a.audio.pause();a.audio.volume=b}),this._updateCurrentTime=null,j.once(this.audio,"progress",function(){null!==a._updateCurrentTime&&a._updateCurrentTime()});
this.audio.pause();this.audio.preload="auto";j.once(this.audio,"error",function(){a._nextFormat()?a.load(a.name):(a.audio.src=null,a.complete=!0)});j.once(this.audio,"loadeddata",function(){a.complete=!0});this.audio.src=b},loop:function(b){var a=this._initAudio(b,!0);j.once(a,"loadeddata",function(){a.play()})},play:function(b,a){a=a||0;if(n("shittySound"))try{return this.audio.currentTime=a/1E3,this.audio.play()}catch(c){return this._updateCurrentTime=function(){this._updateCurrentTime=null;this.audio.currentTime=
a/1E3;return this.audio.play()},this.audio.play()}var d=this._initAudio(b,!1);j.once(d,"loadeddata",function(){d.currentTime=a/1E3;d.play()})},_initAudio:function(b,a){var a="boolean"===typeof a?a:!1,c=new Audio;c.pause();c.volume=b||1;c.loop=a;c.preload="auto";c.mozLoadFrom?c.mozLoadFrom(this.audio):c.src=this.audio.currentSrc;return c}})})},"frozen/shims/RAF":function(){define(function(){for(var d=0,i=["ms","moz","webkit","o"],h=0;h<i.length&&!window.requestAnimationFrame;++h)window.requestAnimationFrame=
window[i[h]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[h]+"CancelAnimationFrame"]||window[i[h]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame)window.requestAnimationFrame=function(b){var h=(new Date).getTime(),i=Math.max(0,16-(h-d)),g=window.setTimeout(function(){b(h+i)},i);d=h+i;return g};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(b){clearTimeout(b)}})},"frozen/Animation":function(){define(["./AnimFrame","dcl","dcl/bases/Mixer"],function(d,
i,h){var b=i(h,{currFrameIndex:0,animTime:0,totalDuration:0,height:64,width:64,image:null,offsetX:0,offsetY:0,constructor:function(){this.start()},createFromSheet:function(d,h,g,a,c,i){g=new b({image:g,height:c,width:a});a=Array.isArray(h);c=1;i||(i=0);for(var m=0;m<d;m++)c=a?h[m]:h,g.addFrame(c,m,i);return g},clone:function(){return new b({image:this.image,frames:this.frames,totalDuration:this.totalDuration})},addFrame:function(b,h,g){if(!this.frames)this.frames=[];this.totalDuration+=b;this.frames.push(new d({endTime:this.totalDuration,
image:this.image,imgSlotX:h,imgSlotY:g}))},start:function(){this.currFrameIndex=this.animTime=0},update:function(b){if(1<this.frames.length){this.animTime+=b;if(this.animTime>=this.totalDuration)this.animTime%=this.totalDuration,this.currFrameIndex=0;for(;this.animTime>this.frames[this.currFrameIndex].endTime;)this.currFrameIndex++}},getCurrentFrame:function(){return 0===this.frames.length?null:this.frames[this.currFrameIndex]},draw:function(b,d,g){var a=this.getCurrentFrame();b.drawImage(this.image,
a.imgSlotX*this.width+this.offsetX,a.imgSlotY*this.height+this.offsetY,this.width,this.height,d,g,this.width,this.height)}});return b})},"frozen/AnimFrame":function(){define(["dcl","dcl/bases/Mixer"],function(d,i){return d(i,{endTime:0,imgSlotX:0,imgSlotY:0,image:null})})},"frozen/plugins/loadImage":function(){define(["../ResourceManager","../utils/parseString"],function(d,i){var h=new d;return{load:function(b,d,n){b=i(b);b=h.loadImage(b);n(b)}}})},"frozen/utils/parseString":function(){define(function(){return function(d){0===
d.indexOf("{")&&d.lastIndexOf("}")===d.length-1?d=JSON.parse(d.replace(/,/g,'","').replace(/:(?!\/\/)/g,'":"').replace(/\{/,'{"').replace(/\}/,'"}')):0===d.indexOf("[")&&d.lastIndexOf("]")===d.length-1&&(d=JSON.parse(d.replace(/,/g,'","').replace(/\[/g,'["').replace(/\]/g,'"]')));return d}})}}});(function(){require({cache:{}});require.boot&&require.apply(null,require.boot)})();