//>>built
/*

 Lo-Dash 1.3.1 (Custom Build) <http://lodash.com/>
 Build: `lodash modern -o ./dist/lodash.js`
 Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 Available under MIT license <http://lodash.com/license>
*/
(function(d,i){var h,b,m,n=function(){},e=function(a){for(var c in a)return 0;return 1},a={}.toString,c=function(ga){return"[object Function]"==a.call(ga)},j=function(ga){return"[object String]"==a.call(ga)},l=function(ga){return"[object Array]"==a.call(ga)},g=function(a,c){if(a)for(var b=0;b<a.length;)c(a[b++])},o=function(a,c){for(var b in c)a[b]=c[b];return a},s=function(a,c){return o(Error(a),{src:"dojoLoader",info:c})},O=1,I=function(){return"_"+O++},k=function(a,c,b){return ha(a,c,b,0,k)},qa=
this,q=qa.document,z=q&&q.createElement("DiV"),A=k.has=function(a){return c(r[a])?r[a]=r[a](qa,q,z):r[a]},r=A.cache=i.hasCache;A.add=function(a,c,b,f){(void 0===r[a]||f)&&(r[a]=c);return b&&A(a)};for(var t in d.has)A.add(t,d.has[t],0,1);k.async=1;var E=new Function("return eval(arguments[0]);");k.eval=function(a,c){return E(a+"\r\n////@ sourceURL="+c)};var C={},v=k.signal=function(a,c){var b=C[a];g(b&&b.slice(0),function(a){a.apply(null,l(c)?c:[c])})},xa=k.on=function(a,c){var b=C[a]||(C[a]=[]);b.push(c);
return{remove:function(){for(var a=0;a<b.length;a++)if(b[a]===c){b.splice(a,1);break}}}},Sa=[],Ta={},ia=[],ya={},Ua=k.map={},ba=[],F={},La="",ja={},za={};t={};var V=function(a){var c,b,f,d;for(c in za)b=za[c],(f=c.match(/^url\:(.+)/))?ja["url:"+zb(f[1],a)]=b:"*now"==c?d=b:"*noref"!=c&&(f=Va(c,a),ja[f.mid]=ja["url:"+f.url]=b);d&&d(U(a));za={}},ra=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},ca=function(a,c){c.splice(0,c.length);for(var b in a)c.push([b,a[b],
RegExp("^"+ra(b)+"(/|$)"),b.length]);c.sort(function(a,c){return c[3]-a[3]});return c},ka=function(a){var c=a.name;c||(c=a,a={name:c});a=o({main:"main"},a);a.location=a.location?a.location:c;if(a.packageMap)Ua[c]=a.packageMap;if(!a.main.indexOf("./"))a.main=a.main.substring(2);ya[c]=a},Ma=[],Q=function(a,c,b){for(var f in a){if("waitSeconds"==f)k.waitms=1E3*(a[f]||0);"cacheBust"==f&&(La=a[f]?j(a[f])?a[f]:(new Date).getTime()+"":"");if("baseUrl"==f||"combo"==f)k[f]=a[f];a[f]!==r&&(k.rawConfig[f]=a[f],
"has"!=f&&A.add("config-"+f,a[f],0,c))}if(!k.baseUrl)k.baseUrl="./";/\/$/.test(k.baseUrl)||(k.baseUrl+="/");for(f in a.has)A.add(f,a.has[f],0,c);g(a.packages,ka);for(m in a.packagePaths)g(a.packagePaths[m],function(a){var c=m+"/"+a;j(a)&&(a={name:a});a.location=c;ka(a)});ca(o(Ua,a.map),ba);g(ba,function(a){a[1]=ca(a[1],[]);if("*"==a[0])ba.star=a});ca(o(Ta,a.paths),ia);g(a.aliases,function(a){j(a[0])&&(a[0]=RegExp("^"+ra(a[0])+"$"));Sa.push(a)});if(c)Ma.push({config:a.config});else for(f in a.config)c=
W(f,b),c.config=o(c.config||{},a.config[f]);if(a.cache)V(),za=a.cache,a.cache["*noref"]&&V();v("config",[a,k.rawConfig])};k.rawConfig={};Q(i,1);Q(d,1);Q(t,1);var L=function(a){sa(function(){g(a.deps,Na)})},ha=function(a,c,b,d,g){var e;if(j(a)){if((e=W(a,d,!0))&&e.executed)return e.result;throw s("undefinedModule",a);}l(a)||(Q(a,0,d),a=c,c=b);if(l(a))if(a.length){for(var b="require*"+I(),h,m=[],i=0;i<a.length;)h=a[i++],m.push(W(h,d));e=o(f("",b,0,""),{injected:2,deps:m,def:c||n,require:d?d.require:
k,gc:1});F[e.mid]=e;L(e);var q=Y&&0!="sync";sa(function(){Aa(e,q)});e.executed||x.push(e);w()}else c&&c();return g},U=function(a){if(!a)return k;var c=a.require;if(!c)c=function(b,f,d){return ha(b,f,d,a,c)},a.require=o(c,k),c.module=a,c.toUrl=function(c){return zb(c,a)},c.toAbsMid=function(c){return ob(c,a)};return c},x=[],B=[],y={},la=function(a){a.injected=1;y[a.mid]=1;a.url&&(y[a.url]=a.pack||1);Xa()},ma=function(a){a.injected=2;delete y[a.mid];a.url&&delete y[a.url];e(y)&&Oa()},Z=k.idle=function(){return!B.length&&
e(y)&&!x.length&&!Y},P=function(a,c){if(c)for(var b=0;b<c.length;b++)if(c[b][2].test(a))return c[b];return 0},Ab=function(a){for(var c=[],b,f,a=a.replace(/\\/g,"/").split("/");a.length;)b=a.shift(),".."==b&&c.length&&".."!=f?(c.pop(),f=c[c.length-1]):"."!=b&&c.push(f=b);return c.join("/")},f=function(a,c,b,f){return{pid:a,mid:c,pack:b,url:f,executed:0,def:0}},Bb=function(a,b,d,e,l,j,k,m){var n,i,o,q;q=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||q&&!b)return f(0,a,0,a);a=Ab(q?b.mid+"/../"+a:a);
if(/^\./.test(a))throw s("irrationalPath",a);b&&(o=P(b.mid,j));(o=(o=o||j.star)&&P(a,o[1]))&&(a=o[1]+a.substring(o[3]));b=(h=a.match(/^([^\/]+)(\/(.+))?$/))?h[1]:"";(n=d[b])?a=b+"/"+(i=h[3]||n.main):b="";var z=0;g(Sa,function(b){var f=a.match(b[0]);f&&0<f.length&&(z=c(b[1])?a.replace(b[0],b[1]):b[1])});if(z)return Bb(z,0,d,e,l,j,k,m);if(d=e[a])return m?f(d.pid,d.mid,d.pack,d.url):e[a];e=(o=P(a,k))?o[1]+a.substring(o[3]):b?n.location+"/"+i:a;/(^\/)|(\:)/.test(e)||(e=l+e);return f(b,a,n,Ab(e+".js"))},
Va=function(a,c){return Bb(a,c,ya,F,k.baseUrl,ba,ia)},Cb=function(a,c,b){return a.normalize?a.normalize(c,function(a){return ob(a,b)}):ob(c,b)},Db=0,W=function(a,c,b){var f,d;(f=a.match(/^(.+?)\!(.*)$/))?(d=W(f[1],c,b),5===d.executed&&!d.load&&ea(d),d.load?(f=Cb(d,f[2],c),a=d.mid+"!"+(d.dynamic?++Db+"!":"")+f):(f=f[2],a=d.mid+"!"+ ++Db+"!waitingForPlugin"),a={plugin:d,mid:a,req:U(c),prid:f}):a=Va(a,c);return F[a.mid]||!b&&(F[a.mid]=a)},ob=k.toAbsMid=function(a,c){return Va(a,c).mid},zb=k.toUrl=function(a,
c){var b=Va(a+"/x",c),f=b.url;return Ba(0===b.pid?a:f.substring(0,f.length-5))},Ca={injected:2,executed:5,def:3,result:3},R=function(a){return F[a]=o({mid:a},Ca)},Ya=R("require"),na=R("exports"),$=R("module"),G={},Da=0,ea=function(a){var c=a.result;a.dynamic=c.dynamic;a.normalize=c.normalize;a.load=c.load;return a},Za=function(a){var c={};g(a.loadQ,function(b){var f=Cb(a,b.prid,b.req.module),d=a.dynamic?b.mid.replace(/waitingForPlugin$/,f):a.mid+"!"+f,f=o(o({},b),{mid:d,prid:f,injected:0});F[d]||
Qa(F[d]=f);c[b.mid]=F[d];ma(b);delete F[b.mid]});a.loadQ=0;var b=function(a){for(var b=a.deps||[],f=0;f<b.length;f++)(a=c[b[f].mid])&&(b[f]=a)},f;for(f in F)b(F[f]);g(x,b)},ta=function(a){k.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=Da++;a.loadQ&&(ea(a),Za(a));for(b=0;b<x.length;)x[b]===a?x.splice(b,1):b++;/^require\*/.test(a.mid)&&delete F[a.mid]},$a=[],Aa=function(a,b){if(4===a.executed)return k.trace("loader-circular-dependency",[$a.concat(a.mid).join("->")]),!a.def||b?G:a.cjs&&
a.cjs.exports;if(!a.executed){if(!a.def)return G;var f=a.mid,d=a.deps||[],e,g=[],l=0;for(a.executed=4;l<d.length;){e=d[l++];e=e===Ya?U(a):e===na?a.cjs.exports:e===$?a.cjs:Aa(e,b);if(e===G)return a.executed=0,k.trace("loader-exec-module",["abort",f]),G;g.push(e)}k.trace("loader-run-factory",[a.mid]);f=a.def;g=c(f)?f.apply(null,g):f;a.result=void 0===g&&a.cjs?a.cjs.exports:g;ta(a)}return a.result},Y=0,sa=function(a){try{Y++,a()}finally{Y--}Z()&&v("idle",[])},w=function(){Y||sa(function(){for(var a,
c,b=0;b<x.length;)a=Da,c=x[b],Aa(c),a!=Da?b=0:b++})};void 0===A("dojo-loader-eval-hint-url")&&A.add("dojo-loader-eval-hint-url",1);var Ba=function(a){a+="";return a+(La?(/\?/.test(a)?"&":"?")+La:"")},Qa=function(a){var c=a.plugin;5===c.executed&&!c.load&&ea(c);var b=function(c){a.result=c;ma(a);ta(a);w()};c.load?c.load(a.prid,a.req,b):c.loadQ?c.loadQ.push(a):(c.loadQ=[a],x.unshift(c),Na(c))},oa=0,ua=0,Ea=0,ab=function(a,c){A("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));Ea=1;a===oa?oa.call(null):
k.eval(a,A("dojo-loader-eval-hint-url")?c.url:c.mid);Ea=0},Na=function(a){var c=a.mid,b=a.url;if(!a.executed&&!a.injected&&!(y[c]||a.url&&(a.pack&&y[a.url]===a.pack||1==y[a.url])))if(la(a),a.plugin)Qa(a);else{var f=function(){bb(a);2!==a.injected&&(ma(a),o(a,Ca),k.trace("loader-define-nonmodule",[a.url]));w()};(oa=ja[c]||ja["url:"+a.url])?(k.trace("loader-inject",["cache",a.mid,b]),ab(oa,a),f()):(k.trace("loader-inject",["script",a.mid,b]),ua=a,k.injectUrl(Ba(b),f,a),ua=0)}},va=function(a,b,f){k.trace("loader-define-module",
[a.mid,b]);if(2===a.injected)return v("error",s("multipleDefine",a)),a;o(a,{deps:b,def:f,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(c){a.cjs.exports=c},config:function(){return a.config}}});for(var d=0;d<b.length;d++)b[d]=W(b[d],a);ma(a);if(!c(f)&&!b.length)a.result=f,ta(a);return a},bb=function(a,c){for(var b=[],f,d;B.length;)d=B.shift(),c&&(d[0]=c.shift()),f=d[0]&&W(d[0])||a,b.push([f,d[1],d[2]]);V(a);g(b,function(a){L(va.apply(null,a))})},Oa=n,Xa=n;A.add("ie-event-behavior",
!!q.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var Fa=function(a,c,b,f){if(A("ie-event-behavior"))return a.attachEvent(b,f),function(){a.detachEvent(b,f)};a.addEventListener(c,f,!1);return function(){a.removeEventListener(c,f,!1)}},cb=Fa(window,"load","onload",function(){k.pageLoaded=1;"complete"!=q.readyState&&(q.readyState="complete");cb()}),Ga=q.getElementsByTagName("script")[0],db=Ga.parentNode;k.injectUrl=function(a,c,b){var b=b.node=q.createElement("script"),
f=Fa(b,"load","onreadystatechange",function(a){var a=a||window.event,b=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(b.readyState))f(),d(),c&&c()}),d=Fa(b,"error","onerror",function(c){f();d();v("error",s("scriptError",[a,c]))});b.type="text/javascript";b.charset="utf-8";b.src=a;db.insertBefore(b,Ga);return b};k.log=n;k.trace=n;R=function(a,b,f){var d=arguments.length,e=["require","exports","module"],g=[0,a,b];1==d?g=[0,c(a)?e:[],a]:2==d&&j(a)?g=[a,c(b)?e:[],b]:3==d&&(g=[a,b,f]);
k.trace("loader-define",g.slice(0,2));if((d=g[0]&&W(g[0]))&&!y[d.mid])L(va(d,g[1],g[2]));else if(!A("ie-event-behavior")||Ea)B.push(g);else{d=d||ua;if(!d)for(a in y)if((e=F[a])&&e.node&&"interactive"===e.node.readyState){d=e;break}d?(V(d),L(va(d,g[1],g[2]))):v("error",s("ieDefineFailed",g[0]));w()}};R.amd={vendor:"dojotoolkit.org"};o(o(k,i.loaderPatch),d.loaderPatch);xa("error",function(a){try{if(console.error(a),a instanceof Error)for(var c in a);}catch(b){}});o(k,{uid:I,cache:ja,packs:ya});if(!qa.define)qa.define=
R,qa.require=k,g(Ma,function(a){Q(a)}),xa=t.deps||d.deps||i.deps,t=t.callback||d.callback||i.callback,k.boot=xa||t?[xa||[],t]:0})(this.dojoConfig||this.djConfig||this.require||{},{async:1,baseUrl:"./",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../loading-screen",name:"loading-screen"},{location:".",name:"dojo"},{location:"../dcl",main:"dcl",name:"dcl"},{location:"../lodash",main:"lodash",name:"lodash"},
{location:"../hammer",main:"hammer",name:"hammer"},{location:"../frozen",main:"GameCore",name:"frozen"},{location:"../game",main:"game",name:"game"}]});
require({cache:{"dist/game":function(){define([],1)},"game/game":function(){define("./update,./draw,lodash,frozen/GameCore,frozen/Animation,frozen/plugins/loadImage!frozenjs.png".split(","),function(d,i,h,b,m,n){function e(a,c,b){for(var d=[],a=Math.floor(Math.sqrt(a)),e=0;e<a;e++){var n=m.prototype.createFromSheet(a,b,c,c.width/a,c.height/a,e);n.frames=h.shuffle(n.frames);h.forEach(n.frames,function(a,c){a.endTime=n.totalDuration/n.frames.length*(c+1)});d.push(n)}return d}setTimeout(function(){(new b({canvasId:"canvas",
gameAreaId:"gameArea",update:d,draw:i,anims:e(50,n,250)})).run()},1E3)})},"game/update":function(){define(["lodash"],function(d){return function(i){d.forEach(this.anims,function(d){d.update(i)})}})},"lodash/lodash":function(){(function(d){function i(a,c,b){for(var b=(b||0)-1,d=a.length;++b<d;)if(a[b]===c)return b;return-1}function h(a,c){var b=typeof c,a=a.cache;if("boolean"==b||null==c)return a[c];"number"!=b&&"string"!=b&&(b="object");var d="number"==b?c:z+c,a=a[b]||(a[b]={});return"object"==b?
a[d]&&-1<i(a[d],c)?0:-1:a[d]?0:-1}function b(a){var c=this.cache,b=typeof a;if("boolean"==b||null==a)c[a]=!0;else{"number"!=b&&"string"!=b&&(b="object");var d="number"==b?a:z+a,e=c[b]||(c[b]={});if("object"==b){if((e[d]||(e[d]=[])).push(a)==this.array.length)c[b]=!1}else e[d]=!0}}function m(a){return a.charCodeAt(0)}function n(a,c){var b=a.index,d=c.index,a=a.criteria,c=c.criteria;if(a!==c){if(a>c||"undefined"==typeof a)return 1;if(a<c||"undefined"==typeof c)return-1}return b<d?-1:1}function e(a){var c=
-1,d=a.length,e=j();e["false"]=e["null"]=e["true"]=e.undefined=!1;var l=j();l.array=a;l.cache=e;for(l.push=b;++c<d;)l.push(a[c]);return!1===e.object?(g(l),null):l}function a(a){return"\\"+y[a]}function c(){return I.pop()||[]}function j(){return k.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,leading:!1,maxWait:0,"null":!1,number:null,object:null,push:null,string:null,trailing:!1,"true":!1,undefined:!1,value:null}}function l(a){a.length=0;I.length<r&&I.push(a)}function g(a){var c=
a.cache;c&&g(c);a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null;k.length<r&&k.push(a)}function o(a,c,b){c||(c=0);"undefined"==typeof b&&(b=a?a.length:0);for(var d=-1,b=b-c||0,e=Array(0>b?0:b);++d<b;)e[d]=a[c+d];return e}function s(b){function f(a){return a&&"object"==typeof a&&!S(a)&&J.call(a,"__wrapped__")?a:new k(a)}function k(a){this.__wrapped__=a}function I(a,c,b,d){function f(){var d=arguments,Ia=g?this:c;e||(a=c[l]);b.length&&(d=d.length?(d=H.call(d),k?d.concat(b):b.concat(d)):
b);return this instanceof f?(Ia=G(a.prototype)?eb(a.prototype):{},d=a.apply(Ia,d),G(d)?d:Ia):a.apply(Ia,d)}var e=$(a),g=!b,l=c;if(g)var k=d,b=c;else if(!e){if(!d)throw new Jb;c=a}return f}function r(a){return Eb[a]}function y(){var a=(a=f.indexOf)===bb?i:a;return a}function W(a){return function(b,c,d,u){"boolean"!=typeof c&&null!=c&&(u=d,d=!(u&&u[c]===b)?c:O,c=!1);null!=d&&(d=f.createCallback(d,u));return a(b,c,d,u)}}function Z(a){var c,b;if(!(a&&N.call(a)==L)||(c=a.constructor,$(c)&&!(c instanceof
c)))return!1;wa(a,function(a,c){b=c});return b===O||J.call(a,b)}function la(a){return Kb[a]}function Ca(a,b,p,d,u,e){var g=a;"boolean"!=typeof b&&null!=b&&(d=p,p=b,b=!1);if("function"==typeof p){p="undefined"==typeof d?p:f.createCallback(p,d,1);g=p(g);if("undefined"!=typeof g)return g;g=a}if(d=G(g)){var k=N.call(g);if(!x[k])return g;var h=S(g)}if(!d||!b)return d?h?o(g):qb({},g):g;d=fa[k];switch(k){case ca:case ka:return new d(+g);case Q:case U:return new d(g);case ha:return d(g.source,Sa.exec(g))}k=
!u;u||(u=c());e||(e=c());for(var j=u.length;j--;)if(u[j]==a)return e[j];g=h?d(g.length):{};if(h){if(J.call(a,"index"))g.index=a.index;if(J.call(a,"input"))g.input=a.input}u.push(a);e.push(g);(h?w:D)(a,function(a,c){g[c]=Ca(a,b,p,O,u,e)});k&&(l(u),l(e));return g}function R(a){var c=[];wa(a,function(a,b){$(a)&&c.push(b)});return c.sort()}function Ya(a){for(var c=-1,b=T(a),d=b.length,f={};++c<d;){var e=b[c];f[a[e]]=e}return f}function na(a,b,p,d,u,e){var g=p===q;if("function"==typeof p&&!g){var p=f.createCallback(p,
d,2),k=p(a,b);if("undefined"!=typeof k)return!!k}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,j=typeof b;if(a===a&&(!a||"function"!=h&&"object"!=h)&&(!b||"function"!=j&&"object"!=j))return!1;if(null==a||null==b)return a===b;j=N.call(a);h=N.call(b);j==V&&(j=L);h==V&&(h=L);if(j!=h)return!1;switch(j){case ca:case ka:return+a==+b;case Q:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case ha:case U:return a==da(b)}h=j==ra;if(!h){if(J.call(a,"__wrapped__ ")||J.call(b,"__wrapped__"))return na(a.__wrapped__||a,
b.__wrapped__||b,p,d,u,e);if(j!=L)return!1;var j=a.constructor,m=b.constructor;if(j!=m&&(!$(j)||!(j instanceof j&&$(m)&&m instanceof m)))return!1}m=!u;u||(u=c());e||(e=c());for(j=u.length;j--;)if(u[j]==a)return e[j]==b;var n=0,k=!0;u.push(a);e.push(b);if(h){j=a.length;n=b.length;k=n==a.length;if(!k&&!g)return k;for(;n--;)if(h=j,m=b[n],g)for(;h--&&!(k=na(a[h],m,p,d,u,e)););else if(!(k=na(a[n],m,p,d,u,e)))break;return k}wa(b,function(b,c,Ha){if(J.call(Ha,c))return n++,k=J.call(a,c)&&na(a[c],b,p,d,u,
e)});k&&!g&&wa(a,function(a,b,c){if(J.call(c,b))return k=-1<--n});m&&(l(u),l(e));return k}function $(a){return"function"==typeof a}function G(a){return!(!a||!B[typeof a])}function Da(a){return"number"==typeof a||N.call(a)==Q}function ea(a){return"string"==typeof a||N.call(a)==U}function Za(a,b,p){var d=arguments,e=0,g=2;if(!G(a))return a;if(p===q)var k=d[3],j=d[4],h=d[5];else{var m=!0,j=c(),h=c();if("number"!=typeof p)g=d.length;3<g&&"function"==typeof d[g-2]?k=f.createCallback(d[--g-1],d[g--],2):
2<g&&"function"==typeof d[g-1]&&(k=d[--g])}for(;++e<g;)(S(d[e])?w:D)(d[e],function(b,c){var Ha,d,p=b,f=a[c];if(b&&((d=S(b))||rb(b))){for(p=j.length;p--;)if(Ha=j[p]==b){f=h[p];break}if(!Ha){var e;if(k&&(p=k(f,b),e="undefined"!=typeof p))f=p;e||(f=d?S(f)?f:[]:rb(f)?f:{});j.push(b);h.push(f);e||(f=Za(f,b,q,k,j,h))}}else k&&(p=k(f,b),"undefined"==typeof p&&(p=b)),"undefined"!=typeof p&&(f=p);a[c]=f});m&&(l(j),l(h));return a}function ta(a){for(var b=-1,c=T(a),d=c.length,f=K(d);++b<d;)f[b]=a[c[b]];return f}
function $a(a,b,c){var d=-1,f=y(),e=a?a.length:0,g=!1,c=(0>c?aa(0,e+c):c)||0;e&&"number"==typeof e?g=-1<(ea(a)?a.indexOf(b,c):f(a,b,c)):D(a,function(a){if(++d>=c)return!(g=a===b)});return g}function Aa(a,b,c){var d=!0,b=f.createCallback(b,c),c=-1,e=a?a.length:0;if("number"==typeof e)for(;++c<e&&(d=!!b(a[c],c,a)););else D(a,function(a,c,p){return d=!!b(a,c,p)});return d}function Y(a,b,c){var d=[],b=f.createCallback(b,c),c=-1,e=a?a.length:0;if("number"==typeof e)for(;++c<e;){var g=a[c];b(g,c,a)&&d.push(g)}else D(a,
function(a,c,p){b(a,c,p)&&d.push(a)});return d}function sa(a,b,c){var b=f.createCallback(b,c),c=-1,d=a?a.length:0;if("number"==typeof d)for(;++c<d;){var e=a[c];if(b(e,c,a))return e}else{var g;D(a,function(a,c,d){if(b(a,c,d))return g=a,!1});return g}}function w(a,b,c){var d=-1,e=a?a.length:0,b=b&&"undefined"==typeof c?b:f.createCallback(b,c);if("number"==typeof e)for(;++d<e&&!(!1===b(a[d],d,a)););else D(a,b);return a}function Ba(a,b,c){var d=-1,e=a?a.length:0,b=f.createCallback(b,c);if("number"==typeof e)for(var g=
K(e);++d<e;)g[d]=b(a[d],d,a);else g=[],D(a,function(a,c,p){g[++d]=b(a,c,p)});return g}function Qa(a,b,c){var d=-Infinity,e=d;if(!b&&S(a))for(var c=-1,g=a.length;++c<g;){var k=a[c];k>e&&(e=k)}else b=!b&&ea(a)?m:f.createCallback(b,c),w(a,function(a,c,p){c=b(a,c,p);c>d&&(d=c,e=a)});return e}function oa(a,b){var c=-1,d=a?a.length:0;if("number"==typeof d)for(var f=K(d);++c<d;)f[c]=a[c][b];return f||Ba(a,b)}function ua(a,b,c,d){if(!a)return c;var e=3>arguments.length,b=f.createCallback(b,d,4),g=-1,k=a.length;
if("number"==typeof k)for(e&&(c=a[++g]);++g<k;)c=b(c,a[g],g,a);else D(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function Ea(a,b,c,d){var e=a?a.length:0,g=3>arguments.length;if("number"!=typeof e)var k=T(a),e=k.length;b=f.createCallback(b,d,4);w(a,function(d,f,Ia){f=k?k[--e]:--e;c=g?(g=!1,a[f]):b(c,a[f],f,Ia)});return c}function ab(a,b,c){var d,b=f.createCallback(b,c),c=-1,e=a?a.length:0;if("number"==typeof e)for(;++c<e&&!(d=b(a[c],c,a)););else D(a,function(a,c,f){return!(d=b(a,c,f))});
return!!d}function Na(a){var b=-1,c=y(),d=a?a.length:0,f=Ja.apply(M,H.call(arguments,1)),k=[],j=d>=A&&c===i;if(j){var l=e(f);l?(c=h,f=l):j=!1}for(;++b<d;)l=a[b],0>c(f,l)&&k.push(l);j&&g(f);return k}function va(a,b,c){if(a){var d=0,e=a.length;if("number"!=typeof b&&null!=b)for(var g=-1,b=f.createCallback(b,c);++g<e&&b(a[g],g,a);)d++;else if(d=b,null==d||c)return a[0];return o(a,0,fb(aa(0,d),e))}}function bb(a,b,c){if("number"==typeof c)var d=a?a.length:0,c=0>c?aa(0,d+c):c||0;else if(c)return c=Xa(a,
b),a[c]===b?c:-1;return a?i(a,b,c):-1}function Oa(a,b,c){if("number"!=typeof b&&null!=b)for(var d=0,e=-1,g=a?a.length:0,b=f.createCallback(b,c);++e<g&&b(a[e],e,a);)d++;else d=null==b||c?1:aa(0,b);return o(a,d)}function Xa(a,b,c,d){for(var e=0,g=a?a.length:e,c=c?f.createCallback(c,d,1):lb,b=c(b);e<g;)d=e+g>>>1,c(a[d])<b?e=d+1:g=d;return e}function Fa(a){for(var b=-1,c=a?Qa(oa(a,"length")):0,d=K(0>c?0:c);++b<c;)d[b]=oa(a,b);return d}function cb(a,b){for(var c=-1,d=a?a.length:0,f={};++c<d;){var e=a[c];
b?f[e]=b[c]:f[e[0]]=e[1]}return f}function Ga(a,b){return Fb.fastBind||pa&&2<arguments.length?pa.call.apply(pa,arguments):I(a,b,H.call(arguments,2))}function db(a,b,c){function d(){gb(n);gb(i);h=0;n=i=null}function f(){var b=o&&(!s||1<h);d();b&&(!1!==m&&(l=new Wa),k=a.apply(j,g))}function e(){d();if(o||m!==b)l=new Wa,k=a.apply(j,g)}var g,k,j,h=0,l=0,m=!1,n=null,i=null,o=!0,b=aa(0,b||0);if(!0===c)var s=!0,o=!1;else if(G(c))s=c.leading,m="maxWait"in c&&aa(b,c.maxWait||0),o="trailing"in c?c.trailing:
o;return function(){g=arguments;j=this;h++;gb(i);if(!1===m)s&&2>h&&(k=a.apply(j,g));else{var c=new Wa;!n&&!s&&(l=c);var d=m-(c-l);0>=d?(gb(n),n=null,l=c,k=a.apply(j,g)):n||(n=hb(e,d))}b!==m&&(i=hb(f,b));return k}}function ga(a){var b=H.call(arguments,1);return hb(function(){a.apply(O,b)},1)}function lb(a){return a}function xb(a){w(R(a),function(b){var c=f[b]=a[b];f.prototype[b]=function(){var a=this.__wrapped__,b=[a];ib.apply(b,arguments);b=c.apply(f,b);return a&&"object"==typeof a&&a===b?this:new k(b)}})}
function yb(){return this.__wrapped__}var b=b?P.defaults(d.Object(),b,P.pick(d,ja)):d,K=b.Array,mb=b.Boolean,Wa=b.Date,nb=b.Function,X=b.Math,Ib=b.Number,Pa=b.Object,pb=b.RegExp,da=b.String,Jb=b.TypeError,M=[],sb=Pa.prototype,Lb=b._,Ka=pb("^"+da(sb.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Mb=X.ceil,gb=b.clearTimeout,Ja=M.concat,Gb=X.floor,Nb=nb.prototype.toString,Ra=Ka.test(Ra=Pa.getPrototypeOf)&&Ra,J=sb.hasOwnProperty,ib=M.push,jb=b.setImmediate,hb=
b.setTimeout,N=sb.toString,pa=Ka.test(pa=N.bind)&&pa,eb=Ka.test(eb=Pa.create)&&eb,tb=Ka.test(tb=K.isArray)&&tb,Ob=b.isFinite,Pb=b.isNaN,kb=Ka.test(kb=Pa.keys)&&kb,aa=X.max,fb=X.min,ub=b.parseInt,Hb=X.random,H=M.slice,X=Ka.test(b.attachEvent),X=pa&&!/\n|true/.test(pa+X),fa={};fa[ra]=K;fa[ca]=mb;fa[ka]=Wa;fa[Ma]=nb;fa[L]=Pa;fa[Q]=Ib;fa[ha]=pb;fa[U]=da;k.prototype=f.prototype;var Fb=f.support={};Fb.fastBind=pa&&!X;f.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Ta,
variable:"",imports:{_:f}};var S=tb,T=!kb?function(a){var b,c=[];if(!a||!B[typeof a])return c;for(b in a)J.call(a,b)&&c.push(b);return c}:function(a){return!G(a)?[]:kb(a)},Eb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kb=Ya(Eb),qb=function(a,b,c){var d,e=a,g=e;if(!e)return g;var k=arguments,j=0,h="number"==typeof c?2:k.length;if(3<h&&"function"==typeof k[h-2])var l=f.createCallback(k[--h-1],k[h--],2);else 2<h&&"function"==typeof k[h-1]&&(l=k[--h]);for(;++j<h;)if((e=k[j])&&B[typeof e])for(var m=
-1,n=B[typeof e]&&T(e),i=n?n.length:0;++m<i;)d=n[m],g[d]=l?l(g[d],e[d]):e[d];return g},vb=function(a,b,c){var d,f=a,e=f;if(!f)return e;for(var g=arguments,k=0,j="number"==typeof c?2:g.length;++k<j;)if((f=g[k])&&B[typeof f])for(var h=-1,l=B[typeof f]&&T(f),m=l?l.length:0;++h<m;)d=l[h],"undefined"==typeof e[d]&&(e[d]=f[d]);return e},wa=function(a,b,c){var d;if(!a||!B[typeof a])return a;b=b&&"undefined"==typeof c?b:f.createCallback(b,c);for(d in a)if(!1===b(a[d],d,a))break;return a},D=function(a,b,c){if(!a||
!B[typeof a])return a;for(var b=b&&"undefined"==typeof c?b:f.createCallback(b,c),d=-1,e=B[typeof a]&&T(a),g=e?e.length:0;++d<g&&!(c=e[d],!1===b(a[c],c,a)););return a},rb=function(a){if(!(a&&N.call(a)==L))return!1;var b=a.valueOf,c="function"==typeof b&&(c=Ra(b))&&Ra(c);return c?a==c||Ra(a)==c:Z(a)},mb=W(function Ha(a,b,c){for(var d=-1,f=a?a.length:0,e=[];++d<f;){var g=a[d];c&&(g=c(g,d,a));S(g)?ib.apply(e,b?g:Ha(g)):e.push(g)}return e}),wb=W(function(a,b,d){var f=-1,k=y(),j=a?a.length:0,m=[],n=!b&&
j>=A&&k===i,o=d||n?c():m;if(n){var s=e(o);s?(k=h,o=s):(n=!1,o=d?o:(l(o),m))}for(;++f<j;){var s=a[f],q=d?d(s,f,a):s;if(b?!f||o[o.length-1]!==q:0>k(o,q))(d||n)&&o.push(q),m.push(s)}n?(l(o.array),g(o)):d&&l(o);return m});X&&ma&&"function"==typeof jb&&(ga=Ga(jb,b));jb=8==ub(ya+"08")?ub:function(a,b){return ub(ea(a)?a.replace(Ua,""):a,b||0)};f.after=function(a,b){return 1>a?b():function(){if(1>--a)return b.apply(this,arguments)}};f.assign=qb;f.at=function(a){for(var b=-1,c=Ja.apply(M,H.call(arguments,
1)),d=c.length,f=K(d);++b<d;)f[b]=a[c[b]];return f};f.bind=Ga;f.bindAll=function(a){for(var b=1<arguments.length?Ja.apply(M,H.call(arguments,1)):R(a),c=-1,d=b.length;++c<d;){var f=b[c];a[f]=Ga(a[f],a)}return a};f.bindKey=function(a,b){return I(a,b,H.call(arguments,2),q)};f.compact=function(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var f=a[b];f&&d.push(f)}return d};f.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}};f.countBy=
function(a,b,c){var d={},b=f.createCallback(b,c);w(a,function(a,c,f){c=da(b(a,c,f));J.call(d,c)?d[c]++:d[c]=1});return d};f.createCallback=function(a,b,c){if(null==a)return lb;var d=typeof a;if("function"!=d){if("object"!=d)return function(b){return b[a]};var f=T(a);return function(b){for(var c=f.length,d=!1;c--&&(d=na(b[f[c]],a[f[c]],q)););return d}}return"undefined"==typeof b||ia&&!ia.test(Nb.call(a))?a:1===c?function(c){return a.call(b,c)}:2===c?function(c,d){return a.call(b,c,d)}:4===c?function(c,
d,f,e){return a.call(b,c,d,f,e)}:function(c,d,f){return a.call(b,c,d,f)}};f.debounce=db;f.defaults=vb;f.defer=ga;f.delay=function(a,b){var c=H.call(arguments,2);return hb(function(){a.apply(O,c)},b)};f.difference=Na;f.filter=Y;f.flatten=mb;f.forEach=w;f.forIn=wa;f.forOwn=D;f.functions=R;f.groupBy=function(a,b,c){var d={},b=f.createCallback(b,c);w(a,function(a,c,f){c=da(b(a,c,f));(J.call(d,c)?d[c]:d[c]=[]).push(a)});return d};f.initial=function(a,b,c){if(!a)return[];var d=0,e=a.length;if("number"!=
typeof b&&null!=b)for(var g=e,b=f.createCallback(b,c);g--&&b(a[g],g,a);)d++;else d=null==b||c?1:b||d;return o(a,0,fb(aa(0,e-d),e))};f.intersection=function(a){for(var b=arguments,d=b.length,f=-1,k=c(),j=-1,m=y(),n=a?a.length:0,o=[],s=c();++f<d;){var q=b[f];k[f]=m===i&&(q?q.length:0)>=A&&e(f?b[f]:s)}a:for(;++j<n;){var z=k[0],q=a[j];if(0>(z?h(z,q):m(s,q))){f=d;for((z||s).push(q);--f;)if(z=k[f],0>(z?h(z,q):m(b[f],q)))continue a;o.push(q)}}for(;d--;)(z=k[d])&&g(z);l(k);l(s);return o};f.invert=Ya;f.invoke=
function(a,b){var c=H.call(arguments,2),d=-1,f="function"==typeof b,e=a?a.length:0,g=K("number"==typeof e?e:0);w(a,function(a){g[++d]=(f?b:a[b]).apply(a,c)});return g};f.keys=T;f.map=Ba;f.max=Qa;f.memoize=function(a,b){function c(){var d=c.cache,f=z+(b?b.apply(this,arguments):arguments[0]);return J.call(d,f)?d[f]:d[f]=a.apply(this,arguments)}c.cache={};return c};f.merge=Za;f.min=function(a,b,c){var d=Infinity,e=d;if(!b&&S(a))for(var c=-1,g=a.length;++c<g;){var k=a[c];k<e&&(e=k)}else b=!b&&ea(a)?m:
f.createCallback(b,c),w(a,function(a,c,f){c=b(a,c,f);c<d&&(d=c,e=a)});return e};f.omit=function(a,b,c){var d=y(),e="function"==typeof b,g={};if(e)b=f.createCallback(b,c);else var k=Ja.apply(M,H.call(arguments,1));wa(a,function(a,c,f){if(e?!b(a,c,f):0>d(k,c))g[c]=a});return g};f.once=function(a){var b,c;return function(){if(b)return c;b=!0;c=a.apply(this,arguments);a=null;return c}};f.pairs=function(a){for(var b=-1,c=T(a),d=c.length,f=K(d);++b<d;){var e=c[b];f[b]=[e,a[e]]}return f};f.partial=function(a){return I(a,
H.call(arguments,1))};f.partialRight=function(a){return I(a,H.call(arguments,1),null,q)};f.pick=function(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,g=Ja.apply(M,H.call(arguments,1)),k=G(a)?g.length:0;++e<k;){var j=g[e];j in a&&(d[j]=a[j])}else b=f.createCallback(b,c),wa(a,function(a,c,f){b(a,c,f)&&(d[c]=a)});return d};f.pluck=oa;f.range=function(a,b,c){a=+a||0;c=+c||1;null==b&&(b=a,a=0);for(var d=-1,b=aa(0,Mb((b-a)/c)),f=K(b);++d<b;)f[d]=a,a+=c;return f};f.reject=function(a,b,c){b=f.createCallback(b,
c);return Y(a,function(a,c,d){return!b(a,c,d)})};f.rest=Oa;f.shuffle=function(a){var b=-1,c=a?a.length:0,d=K("number"==typeof c?c:0);w(a,function(a){var c=Gb(Hb()*(++b+1));d[b]=d[c];d[c]=a});return d};f.sortBy=function(a,b,c){var d=-1,e=a?a.length:0,k=K("number"==typeof e?e:0),b=f.createCallback(b,c);w(a,function(a,c,f){var e=k[++d]=j();e.criteria=b(a,c,f);e.index=d;e.value=a});e=k.length;for(k.sort(n);e--;)a=k[e],k[e]=a.value,g(a);return k};f.tap=function(a,b){b(a);return a};f.throttle=function(a,
b,c){var d=!0,f=!0;!1===c?d=!1:G(c)&&(d="leading"in c?c.leading:d,f="trailing"in c?c.trailing:f);c=j();c.leading=d;c.maxWait=b;c.trailing=f;a=db(a,b,c);g(c);return a};f.times=function(a,b,c){for(var a=-1<(a=+a)?a:0,d=-1,e=K(a),b=f.createCallback(b,c,1);++d<a;)e[d]=b(d);return e};f.toArray=function(a){return a&&"number"==typeof a.length?o(a):ta(a)};f.transform=function(a,b,c,d){var e=S(a),b=f.createCallback(b,d,4);null==c&&(e?c=[]:(d=a&&a.constructor,c=G(d&&d.prototype)?eb(d&&d.prototype):{}));(e?
w:D)(a,function(a,d,f){return b(c,a,d,f)});return c};f.union=function(a){S(a)||(arguments[0]=a?H.call(a):M);return wb(Ja.apply(M,arguments))};f.uniq=wb;f.unzip=Fa;f.values=ta;f.where=Y;f.without=function(a){return Na(a,H.call(arguments,1))};f.wrap=function(a,b){return function(){var c=[a];ib.apply(c,arguments);return b.apply(this,c)}};f.zip=function(a){return a?Fa(arguments):[]};f.zipObject=cb;f.collect=Ba;f.drop=Oa;f.each=w;f.extend=qb;f.methods=R;f.object=cb;f.select=Y;f.tail=Oa;f.unique=wb;xb(f);
f.chain=f;f.prototype.chain=function(){return this};f.clone=Ca;f.cloneDeep=function(a,b,c){return Ca(a,!0,b,c)};f.contains=$a;f.escape=function(a){return null==a?"":da(a).replace(F,r)};f.every=Aa;f.find=sa;f.findIndex=function(a,b,c){for(var d=-1,e=a?a.length:0,b=f.createCallback(b,c);++d<e;)if(b(a[d],d,a))return d;return-1};f.findKey=function(a,b,c){var d,b=f.createCallback(b,c);D(a,function(a,c,f){if(b(a,c,f))return d=c,!1});return d};f.has=function(a,b){return a?J.call(a,b):!1};f.identity=lb;f.indexOf=
bb;f.isArguments=function(a){return N.call(a)==V};f.isArray=S;f.isBoolean=function(a){return!0===a||!1===a||N.call(a)==ca};f.isDate=function(a){return a?"object"==typeof a&&N.call(a)==ka:!1};f.isElement=function(a){return a?1===a.nodeType:!1};f.isEmpty=function(a){var b=!0;if(!a)return b;var c=N.call(a),d=a.length;if(c==ra||c==U||c==V||c==L&&"number"==typeof d&&$(a.splice))return!d;D(a,function(){return b=!1});return b};f.isEqual=na;f.isFinite=function(a){return Ob(a)&&!Pb(parseFloat(a))};f.isFunction=
$;f.isNaN=function(a){return Da(a)&&a!=+a};f.isNull=function(a){return null===a};f.isNumber=Da;f.isObject=G;f.isPlainObject=rb;f.isRegExp=function(a){return a?"object"==typeof a&&N.call(a)==ha:!1};f.isString=ea;f.isUndefined=function(a){return"undefined"==typeof a};f.lastIndexOf=function(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?aa(0,d+c):fb(c,d-1))+1);d--;)if(a[d]===b)return d;return-1};f.mixin=xb;f.noConflict=function(){b._=Lb;return this};f.parseInt=jb;f.random=function(a,b){null==
a&&null==b&&(b=1);a=+a||0;null==b?(b=a,a=0):b=+b||0;var c=Hb();return a%1||b%1?a+fb(c*(b-a+parseFloat("1e-"+((c+"").length-1))),b):a+Gb(c*(b-a+1))};f.reduce=ua;f.reduceRight=Ea;f.result=function(a,b){var c=a?a[b]:O;return $(c)?a[b]():c};f.runInContext=s;f.size=function(a){var b=a?a.length:0;return"number"==typeof b?b:T(a).length};f.some=ab;f.sortedIndex=Xa;f.template=function(b,c,d){var e=f.templateSettings;b||(b="");var d=vb({},d,e),g=vb({},d.imports,e.imports),e=T(g),g=ta(g),k,j=0,h=d.interpolate||
ba,l="__p += '",h=pb((d.escape||ba).source+"|"+h.source+"|"+(h===Ta?xa:ba).source+"|"+(d.evaluate||ba).source+"|$","g");b.replace(h,function(c,d,f,e,g,h){f||(f=e);l+=b.slice(j,h).replace(La,a);d&&(l+="' +\n__e("+d+") +\n'");g&&(k=!0,l+="';\n"+g+";\n__p += '");f&&(l+="' +\n((__t = ("+f+")) == null ? '' : __t) +\n'");j=h+c.length;return c});var l=l+"';\n",m=h=d.variable;m||(h="obj",l="with ("+h+") {\n"+l+"\n}\n");l=(k?l.replace(t,""):l).replace(E,"$1").replace(C,"$1;");l="function("+h+") {\n"+(m?"":
h+" || ("+h+" = {});\n")+"var __t, __p = '', __e = _.escape"+(k?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";d="\n/*\n//@ sourceURL="+(d.sourceURL||"/lodash/template/source["+za++ +"]")+"\n*/";try{var n=nb(e,"return "+l+d).apply(O,g)}catch(o){throw o.source=l,o;}if(c)return n(c);n.source=l;return n};f.unescape=function(a){return null==a?"":da(a).replace(v,la)};f.uniqueId=function(a){var b=++qa;return da(null==a?"":a)+b};f.all=Aa;f.any=
ab;f.detect=sa;f.findWhere=sa;f.foldl=ua;f.foldr=Ea;f.include=$a;f.inject=ua;D(f,function(a,b){f.prototype[b]||(f.prototype[b]=function(){var b=[this.__wrapped__];ib.apply(b,arguments);return a.apply(f,b)})});f.first=va;f.last=function(a,b,c){if(a){var d=0,e=a.length;if("number"!=typeof b&&null!=b)for(var g=e,b=f.createCallback(b,c);g--&&b(a[g],g,a);)d++;else if(d=b,null==d||c)return a[e-1];return o(a,aa(0,e-d))}};f.take=va;f.head=va;D(f,function(a,b){f.prototype[b]||(f.prototype[b]=function(b,c){var d=
a(this.__wrapped__,b,c);return null==b||c&&"function"!=typeof b?d:new k(d)})});f.VERSION="1.3.1";f.prototype.toString=function(){return da(this.__wrapped__)};f.prototype.value=yb;f.prototype.valueOf=yb;w(["join","pop","shift"],function(a){var b=M[a];f.prototype[a]=function(){return b.apply(this.__wrapped__,arguments)}});w(["push","reverse","sort","unshift"],function(a){var b=M[a];f.prototype[a]=function(){b.apply(this.__wrapped__,arguments);return this}});w(["concat","slice","splice"],function(a){var b=
M[a];f.prototype[a]=function(){return new k(b.apply(this.__wrapped__,arguments))}});return f}var O,I=[],k=[],qa=0,q={},z=+new Date+"",A=75,r=40,t=/\b__p \+= '';/g,E=/\b(__p \+=) '' \+/g,C=/(__e\(.*?\)|\b__t\)) \+\n'';/g,v=/&(?:amp|lt|gt|quot|#39);/g,xa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Sa=/\w*$/,Ta=/<%=([\s\S]+?)%>/g,ia=(ia=/\bthis\b/)&&ia.test(s)&&ia,ya=" \t\u000b\u000c\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",Ua=
RegExp("^["+ya+"]*0+(?=.$)"),ba=/($^)/,F=/[&<>"']/g,La=/['\n\r\t\u2028\u2029\\]/g,ja="Array,Boolean,Date,Function,Math,Number,Object,RegExp,String,_,attachEvent,clearTimeout,isFinite,isNaN,parseInt,setImmediate,setTimeout".split(","),za=0,V="[object Arguments]",ra="[object Array]",ca="[object Boolean]",ka="[object Date]",Ma="[object Function]",Q="[object Number]",L="[object Object]",ha="[object RegExp]",U="[object String]",x={};x[Ma]=!1;x[V]=x[ra]=x[ca]=x[ka]=x[Q]=x[L]=x[ha]=x[U]=!0;var B={"boolean":!1,
"function":!0,object:!0,number:!1,string:!1,undefined:!1},y={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},la=B[typeof exports]&&exports,ma=B[typeof module]&&module&&module.exports==la&&module,Z=B[typeof global]&&global;if(Z&&(Z.global===Z||Z.window===Z))d=Z;var P=s();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(d._=P,define(function(){return P})):la&&!la.nodeType?ma?(ma.exports=P)._=P:la._=P:d._=P})(this)},"game/draw":function(){define(["lodash"],
function(d){return function(i){d.forEach(this.anims,function(d){var b=d.getCurrentFrame(),m=d.frames.length;d.draw(i,d.image.width/m*b.imgSlotX,d.image.height/m*b.imgSlotY)})}})},"frozen/GameCore":function(){define("dcl,dcl/advise,dcl/bases/Mixer,lodash,./InputManager,./ResourceManager,./shims/RAF".split(","),function(d,i,h,b,m,n){return d(h,{statics:{FONT_SIZE:24},isRunning:!1,canvasId:null,maxStep:40,contextType:"2d",height:0,width:0,resourceManager:null,inputManager:null,loadingForeground:"#00F",
loadingBackground:"#FFF",gameAreaId:null,canvasPercentage:0,requestId:null,constructor:function(){var b=this.preUpdate||this.beforeUpdate;b&&i.before(this,"update",b)},setHeight:function(b){this.height=b;this.canvas.height=b},setWidth:function(b){this.width=b;this.canvas.width=b},stop:function(){window.cancelAnimationFrame(this.requestId);this.requestId=null;this.isRunning=!1},run:function(){this.isRunning||(this.init(),this.loadResources(this.resourceManager),this.initInput(this.inputManager),this.launchLoop())},
loadResources:function(){},init:function(){if(!this.canvas)this.canvas=document.getElementById(this.canvasId);if(this.canvas){if(!this.context)this.context=this.canvas.getContext(this.contextType);if(this.context){this.setHeight(this.height||this.canvas.height);this.setWidth(this.width||this.canvas.width);if(!this.inputManager)this.inputManager=this.gameAreaId&&this.canvasPercentage?new m({canvas:this.canvas,gameArea:document.getElementById(this.gameAreaId),canvasPercentage:this.canvasPercentage}):
new m({canvas:this.canvas});this.inputManager.resize();if(!this.resourceManager)this.resourceManager=new n;this.loadResources(this.resourceManager);this.isRunning=!0}else alert("Sorry, your browser does not support a "+this.contextType+" drawing surface on canvas.  I recommend any browser but Internet Explorer")}else alert("Sorry, your browser does not support canvas.  I recommend any browser but Internet Explorer")},initInput:function(){},handleInput:function(){},gameLoop:function(){this.currTime=
(new Date).getTime();this.elapsedTime=Math.min(this.currTime-this.prevTime,this.maxStep);this.prevTime=this.currTime;this.resourceManager&&!this.resourceManager.resourcesReady()?(this.updateLoadingScreen(this.elapsedTime),this.drawLoadingScreen(this.context)):(this.handleInput(this.inputManager,this.elapsedTime),this.paused||this.update(this.elapsedTime),this.context.save(),this.draw(this.context),this.context.restore())},launchLoop:function(){this.elapsedTime=0;var d=Date.now();this.prevTime=this.currTime=
d;this.loopRunner=b.bind(this.loopRunner,this);this.requestId=window.requestAnimationFrame(this.loopRunner)},loopRunner:function(){this.gameLoop();this.requestId=window.requestAnimationFrame(this.loopRunner)},update:function(){},updateLoadingScreen:function(){},draw:function(b){if("2d"===this.contextType)b.font="14px sans-serif",b.fillText("This game does not have its own draw function!",10,50)},drawLoadingScreen:function(b){if(this.resourceManager&&"2d"===this.contextType)b.fillStyle=this.loadingBackground,
b.fillRect(0,0,this.width,this.height),b.fillStyle=this.loadingForeground,b.strokeStyle=this.loadingForeground,b.font="bold "+Math.floor(this.height/12)+"px sans-serif",b.fillText("Loading... "+this.resourceManager.getPercentComplete()+"%",0.1*this.width,0.55*this.height),b.strokeRect(0.1*this.width,0.7*this.height,0.8*this.width,0.1*this.height),b.fillRect(0.1*this.width,0.7*this.height,0.8*this.width*this.resourceManager.getPercentComplete()/100,0.1*this.height),b.lineWidth=4}})})},"dcl/dcl":function(){(function(d){"undefined"!=
typeof define?define(["./mini"],d):"undefined"!=typeof module?module.exports=d(require("./mini")):dcl=d(dcl)})(function(d){function i(){}function h(b,d,a){var c=b||i,j=d||i,l=a||i,g=function(){var a;c.apply(this,arguments);try{a=l.apply(this,arguments)}catch(b){a=b}j.call(this,arguments,a);if(a instanceof Error)throw a;return a};g.advices={b:b,a:d,f:a};return g}function b(b){return function(e,a){var c=e._m,j;c&&((j=+c.w[a]||0)&&j!=b&&d._e("set chaining",a,e,b,j),c.w[a]=b)}}var m=d(d.Super,{constructor:function(){this.b=
this.f.before;this.a=this.f.after;this.f=this.f.around}});d.mix(d,{Advice:m,advise:function(b){return new m(b)},before:function(b){return new m({before:b})},after:function(b){return new m({after:b})},around:d.superCall,chainBefore:b(1),chainAfter:b(2),isInstanceOf:function(b,d){if(b instanceof d)return!0;var a=b.constructor._m,c;if(a)for(a=a.b,c=a.length-1;0<=c;--c)if(a[c]===d)return!0;return!1},_sb:function(b,e,a,c){var c=c[a]=d._ec(e,a,"f"),j=d._ec(e,a,"b").reverse(),e=d._ec(e,a,"a"),c=b?d._st(c,
1==b?function(a){return d._sc(a.reverse())}:d._sc,a):d._ss(c,a);return!j.length&&!e.length?c||function(){}:h(d._sc(j),d._sc(e),c)}});return d})},"dcl/mini":function(){(function(d){"undefined"!=typeof define?define([],d):"undefined"!=typeof module?module.exports=d():dcl=d()})(function(){function d(a,e){var g=[0],k,j,l,o,i,r,t,E,C=0,v;if(a)if(a instanceof Array){o={};t=a.slice(0).reverse();for(E=t.length-1;0<=E;--E)if(j=t[E],j._u=j._u||b++,k=j._m){for(r=k.b,C=r.length-1;0<C;--C)v=r[C]._u,o[v]=(o[v]||
0)+1;t[E]=r.slice(0)}else t[E]=[j];i={};a:for(;t.length;){for(E=0;E<t.length;++E)if(r=t[E],j=r[0],v=j._u,!o[v]){i[v]||(g.push(j),i[v]=1);r.shift();r.length?--o[r[0]._u]:t.splice(E,1);continue a}d._e("cycle",e,t)}a=a[0];C=g.length-((o=a._m)&&a===g[g.length-(C=o.b.length)]?C:1)-1}else a._u=a._u||b++,g=g.concat((o=a._m)?o.b:a);k=a?d.delegate(a[n]):{};for(r=a&&(o=a._m)?d.delegate(o.w):{constructor:2};0<C;--C)if(j=g[C],o=j._m,c(k,o&&o.h||j[n]),o)for(v in t=o.w)r[v]=(+r[v]||0)|t[v];for(v in e)h(o=e[v])?
r[v]=+r[v]||0:k[v]=o;i={b:g,h:e,w:r,c:{}};g[0]={_m:i,prototype:k};j=k;o=i.w;r=i.b;t=i.c;for(l in o)j[l]=d._sb(o[l],r,l,t);l=k[m];l._m=i;l[n]=k;g[0]=l;return d._p(l)}function i(a){this.f=a}function h(a){return a instanceof i}var b=0,m="constructor",n="prototype",e=function(){},a={},c,j,l,g,o;(c=function(a,b){for(var c in b)a[c]=b[c]})(d,{mix:c,delegate:function(a){e[n]=a;a=new e;e[n]=null;return a},Super:i,superCall:function(a){return new i(a)},_p:function(a){return a},_e:function(a){throw Error("dcl: "+
a);},_f:function(a,b){var c=a.f(b);c.ctr=a.ctr;return c},_ec:j=function(b,c,d){for(var e=b.length-1,g=[],j,l,m="f"==d;j=b[e];--e)if((l=j._m)?(l=l.h).hasOwnProperty(c)&&(h(l=l[c])?m?l.f:l=l[d]:m):m&&(l=j[n][c])&&l!==a[c])l.ctr=j,g.push(l);return g},_sc:g=function(a){var b=a.length,c;return!b?0:1==b?(c=a[0],function(){c.apply(this,arguments)}):function(){for(var c=0;c<b;++c)a[c].apply(this,arguments)}},_ss:l=function(b,c){for(var e=0,g,j=a[c];g=b[e];++e)j=h(g)?b[e]=d._f(g,j,c):g;return c!=m?j:function(){j.apply(this,
arguments)}},_st:o=function(a,b,c){for(var e=0,g,j,l=0;g=a[e];++e)h(g)&&(j=e-l,a[e]=d._f(g,!j?0:1==j?a[l]:b(a.slice(l,e)),c),l=e);j=e-l;return!j?0:1==j&&c!=m?a[l]:b(l?a.slice(l):a)},_sb:function(a,b,c,d){b=d[c]=j(b,c,"f");return(a?o(b,g,c):l(b,c))||function(){}}});return d})},"dcl/advise":function(){(function(d){"undefined"!=typeof define?define([],d):"undefined"!=typeof module?module.exports=d():advise=d()})(function(){function d(b,d){this.nb=this.pb=this.na=this.pa=this.nf=this.pf=this;this.i=b;
this.n=d}function i(b){var d=function(){var d,a,c=arguments;for(d=b.pb;d!==b;d=d.pb)d.b.apply(this,c);try{b.pf!==b&&(a=b.pf.f.apply(this,c))}catch(j){a=j}for(d=b.na;d!==b;d=d.na)d.a.call(this,c,a);if(a instanceof Error)throw a;return a};d.adviceNode=b;return d}function h(b,h,e){var a=b[h],c;a&&a.adviceNode&&a.adviceNode instanceof d?c=a.adviceNode:(c=new d(b,h),a&&a.advices?(a=a.advices,c.a(a.b,a.a,a.f)):c.a(0,0,a),b[h]=i(c));"function"==typeof e&&(e=e(h,b));return c.a(e.before,e.after,0,e.around)}
var b=d.prototype={a:function(b,i,e,a){var c=new d(this.i,this.n);c.p=this;c.b=b;this._a("b",c);c.a=i;this._a("a",c);c.f=e;this._a("f",c,a);if(c.o=a)c.f=h._f(a,c.pf.f,this);return c},_a:function(b,d,e){if(d[b]||e)e="n"+b,b="p"+b,(d[b]=this[b])[e]=(d[e]=this)[b]=d},r:function(b){this._r("b",b);this._r("a",b);this._r("f",b)},_r:function(b,d){var e="n"+b,a="p"+b;d[e][a]=d[a];d[a][e]=d[e]},destroy:function(){var b=this.pf.f,d=this.nf,e=this.p;this.r(this);if(d!==this)for(;d!==e;b=d.f,d=d.nf)if(d.o)d.f=
h._f(d.o,b,this);this.i=0}};b.unadvise=b.destroy;h.before=function(b,d,e){return h(b,d,{before:e})};h.after=function(b,d,e){return h(b,d,{after:e})};h.around=function(b,d,e){return h(b,d,{around:e})};h.Node=d;h._f=function(b,d){return b(d)};return h})},"dcl/bases/Mixer":function(){(function(d){"undefined"!=typeof define?define(["../mini"],d):"undefined"!=typeof module?module.exports=d(require("../mini")):dclBasesMixer=d(dcl)})(function(d){return d(null,{declaredClass:"dcl/bases/Mixer",constructor:function(i){d.mix(this,
i)}})})},"frozen/InputManager":function(){define("./GameAction,./MouseAction,./TouchAction,./utils/insideCanvas,dcl,dcl/bases/Mixer,dcl/mixins/Cleanup,dojo/has,dojo/on,lodash,hammer,dojo/domReady!".split(","),function(d,i,h,b,m,n,e,a,c,j,l){return m([n,e],{keyActions:null,mouseAction:null,touchAction:null,canvas:null,handleMouse:!0,handleTouch:!0,handleKeys:!0,gameArea:null,canvasPercentage:null,emulateMouse:!0,hammer:null,on:function(a,b){var c=this.hammer,d=this.removeCleanup;c.on(a,b);var e=this.pushCleanup([a,
b],function(a){c.off.apply(c,a)});return{remove:function(){d(e);e()}}},constructor:function(){function a(b){b.remove()}j.bindAll(this);if(!this.hammer)this.hammer=l(document,{drag_max_touches:0,hold:!1});if(!this.keyActions)this.keyActions={};this.handleKeys&&(this.pushCleanup(c(document,"keydown",this.keydown),a),this.pushCleanup(c(document,"keyup",this.keyup),a));if(this.emulateMouse){if(this.on("touch",this.mousedown),this.on("drag",this.mousemove),this.on("release",this.mouseup),!this.mouseAction)this.mouseAction=
new i}else if(this.on("touch",this.touchstart),this.on("drag",this.touchmove),this.on("release",this.touchend),!this.touchAction)this.touchAction=new h;this.gameArea&&this.canvasPercentage&&(this.pushCleanup(c(window,"resize",this.resize),a),this.pushCleanup(c(window,"orientationchange",this.resize),a))},insideCanvas:function(a){return b(a,this.canvas)},mapToKey:function(a,b){this.keyActions[b]=a},addKeyAction:function(a,b){var c=new d;if(b)c.behavior=c.statics.DETECT_INITAL_PRESS_ONLY;this.mapToKey(c,
a);return c},mouseUp:function(a){this.mouseup(a)},mouseup:function(a){this.mouseAction.release(this.normalizePoint(a.gesture.touches[0]))},mouseDown:function(a){this.mousedown(a)},mousedown:function(a){this.mouseAction.release(null);a=this.normalizePoint(a.gesture.touches[0]);this.mouseAction.insideCanvas=this.insideCanvas(a);this.mouseAction.press(a)},mouseMove:function(a){this.mousemove(a)},mousemove:function(a){this.mouseAction.position=this.normalizePoint(a.gesture?a.gesture.touches[0]:a)},touchStart:function(a){this.touchstart(a)},
touchstart:function(a){this.touchAction.release(null);a=j.map(a.gesture.touches,this.normalizePoint);this.touchAction.insideCanvas=j.some(a,this.insideCanvas);this.touchAction.press(a)},touchEnd:function(a){this.touchend(a)},touchend:function(a){this.touchAction.release(j.map(a.gesture.touches,this.normalizePoint))},touchMove:function(a){this.touchmove(a)},touchmove:function(a){this.touchAction.positions=j.map(a.gesture.touches,this.normalizePoint);this.touchAction.startPositions&&a.preventDefault()},
getKeyAction:function(a){return this.keyActions?this.keyActions[a.keyCode]||this.keyActions[String.fromCharCode(a.keyCode)]:null},keyPressed:function(a){this.keydown(a)},keyDown:function(a){this.keydown(a)},keydown:function(a){(a=this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyReleased:function(a){this.keyup(a)},keyup:function(a){(a=this.getKeyAction(a))&&a.release()},getMouseLoc:function(a){return this.normalizePoint(a)},normalizePoint:function(a){var b,c;c=this.canvas.getBoundingClientRect();
b=c.left;c=c.top;return this.zoomRatio?{x:Math.round((a.clientX-b)/this.zoomRatio),y:Math.round((a.clientY-c)/this.zoomRatio)}:{x:Math.round(a.clientX-b),y:Math.round(a.clientY-c)}},resize:function(){var a,b;if(this.gameArea&&this.canvasPercentage&&this.canvas){var c=this.canvas.width,d=this.canvas.height,e=window.getComputedStyle(document.body,null)||{};a=parseFloat(e.marginLeft)||0;var j=parseFloat(e.marginTop)||0;b=parseFloat(e.marginRight)||0;e=parseFloat(e.marginBottom)||0;a+=b;b=j+e;j=window.innerWidth-
a;a=window.innerHeight-b;d=c/d;e=b="";j/a>d?(j=a*d,b=j+"px",e=a+"px"):(b=j+"px",e=Math.round(j/d)+"px");this.zoomRatio=j/c*this.canvasPercentage;this.gameArea.style.width=b;this.gameArea.style.height=e;c=Math.floor(100*this.canvasPercentage)+"%";this.canvas.style.width=c;this.canvas.style.height=c;this.canvas.style.display="block";this.canvas.style.marginLeft="auto";this.canvas.style.marginRight="auto"}}})})},"frozen/GameAction":function(){define(["dcl","dcl/bases/Mixer"],function(d,i){return d(i,
{name:null,behavior:0,amount:0,state:0,statics:{NORMAL:0,DETECT_INITAL_PRESS_ONLY:1,STATE_RELEASED:0,STATE_PRESSED:1,STATE_WAITING_FOR_RELEASE:2,STATE_MOVED:3},constructor:function(){this.reset()},reset:function(){this.state=this.statics.STATE_RELEASED;this.amount=0},tap:function(){this.press();this.release()},press:function(){this.state=this.statics.STATE_PRESSED;this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY&&this.pressAmt(1)},pressAmt:function(d){if(this.state!==this.statics.STATE_WAITING_FOR_RELEASE)this.amount+=
d,this.state=this.statics.STATE_WAITING_FOR_RELEASE},release:function(){this.state=this.statics.STATE_RELEASED},isPressed:function(){return this.state===this.statics.STATE_PRESSED?!0:!1},getAmount:function(){var d=this.amount;if(0!==d)if(this.state===this.statics.STATE_RELEASED)this.amount=0;else if(this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY)this.state=this.statics.STATE_WAITING_FOR_RELEASE,this.amount=0;return d}})})},"frozen/MouseAction":function(){define(["dcl","./GameAction"],function(d,
i){return d(i,{startPosition:null,endPosition:null,position:null,insideCanvas:null,press:d.superCall(function(d){return function(b){this.position=this.startPosition=b;d.apply(this)}}),release:d.superCall(function(d){return function(b){this.endPosition=b;d.apply(this)}})})})},"frozen/TouchAction":function(){define(["dcl","./GameAction"],function(d,i){return d(i,{startPositions:null,endPositions:null,positions:null,insideCanvas:null,press:d.superCall(function(d){return function(b){this.positions=this.startPositions=
b;d.apply(this)}}),release:d.superCall(function(d){return function(b){this.endPositions=b;d.apply(this)}})})})},"frozen/utils/insideCanvas":function(){define(function(){return function(d,i){return 0>d.x||d.x>i.width||0>d.y||d.y>i.height?!1:!0}})},"dcl/mixins/Cleanup":function(){(function(d){"undefined"!=typeof define?define(["../dcl","./Destroyable"],d):"undefined"!=typeof module?module.exports=d(require("../dcl"),require("./Destroyable")):dclMixinsCleanup=d(dcl,dclMixinsDestroyable)})(function(d,
i){return d(i,{declaredClass:"dcl/mixins/Cleanup",constructor:function(){this.__cleanupStack=[]},pushCleanup:function(d,b){var i=b?function(){b(d)}:function(){d.destroy()};this.__cleanupStack.push(i);return i},popCleanup:function(d){if(d)return this.__cleanupStack.pop();this.__cleanupStack.pop()()},removeCleanup:function(d){for(var b=this.__cleanupStack.length-1;0<=b;--b)if(this.__cleanupStack[b]===d)return this.__cleanupStack.splice(b,1),!0},cleanup:function(){for(;this.__cleanupStack.length;)this.__cleanupStack.pop()()},
destroy:function(){this.cleanup()}})})},"dcl/mixins/Destroyable":function(){(function(d){"undefined"!=typeof define?define(["../dcl"],d):"undefined"!=typeof module?module.exports=d(require("../dcl")):dclMixinsDestroyable=d(dcl)})(function(d){var i=d(null,{declaredClass:"dcl/mixins/Destroyable"});d.chainBefore(i,"destroy");return i})},"dojo/has":function(){define(["require","module"],function(d){var i=d.has||function(){};i.add("touch","ontouchstart"in document);i.add("device-width",screen.availWidth||
innerWidth);d=document.createElement("form");i.add("dom-attributes-explicit",0==d.attributes.length);i.add("dom-attributes-specified-flag",0<d.attributes.length&&40>d.attributes.length);i.clearElement=function(d){d.innerHTML="";return d};i.normalize=function(d,b){var m=d.match(/[\?:]|[^:\?]*/g),n=0,e=function(a){var b=m[n++];if(":"==b)return 0;if("?"==m[n++]){if(!a&&i(b))return e();e(!0);return e(a)}return b||0};return(d=e())&&b(d)};i.load=function(d,b,i){d?b([d],i):i()};return i})},"dojo/on":function(){define(["require",
"./_base/kernel","./has"],function(d,i,h){function b(b,c,d,g,j){if(g=c.match(/(.*):(.*)/))return c=g[2],g=g[1],e.selector(g,c).call(j,b,d);h("touch")&&(a.test(c)&&(d=I(d)),!h("event-orientationchange")&&"orientationchange"==c&&(c="resize",b=window,d=I(d)));o&&(d=o(d));if(b.addEventListener){var i=c in l,m=i?l[c]:c;b.addEventListener(m,d,i);return{remove:function(){b.removeEventListener(m,d,i)}}}c="on"+c;throw Error("Target must be an event emitter");}function m(){this.cancelable=!1}function n(){this.bubbles=
!1}d=window.ScriptEngineMajorVersion;h.add("jscript",d&&d()+ScriptEngineMinorVersion()/10);h.add("event-orientationchange",h("touch")&&!h("android"));h.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var e=function(a,c,d,g){return"function"==typeof a.on&&"function"!=typeof c?a.on(c,d):e.parse(a,c,d,b,g,this)};e.pausable=function(a,b,c,d){var g,a=e(a,b,function(){if(!g)return c.apply(this,arguments)},d);a.pause=function(){g=
!0};a.resume=function(){g=!1};return a};e.once=function(a,b,c){var d=e(a,b,function(){d.remove();return c.apply(this,arguments)});return d};e.parse=function(a,b,c,d,e,g){if(b.call)return b.call(g,a,c);if(-1<b.indexOf(",")){for(var b=b.split(/\s*,\s*/),j=[],l=0,h;h=b[l++];)j.push(d(a,h,c,e,g));j.remove=function(){for(var a=0;a<j.length;a++)j[a].remove()};return j}return d(a,b,c,e,g)};var a=/^touch/;e.selector=function(a,b,c){return function(d,g){function j(b){for(l=l&&l.matches?l:i.query;!l.matches(b,
a,d);)if(b==d||!1===c||!(b=b.parentNode)||1!=b.nodeType)return;return b}var l="function"==typeof a?{matches:a}:this,h=b.bubble;return h?e(d,h(j),g):e(d,b,function(a){var b=j(a.target);return b&&g.call(b,a)})}};var c=[].slice,j=e.emit=function(a,b,d){var e=c.call(arguments,2),g="on"+b;if("parentNode"in a){var j=e[0]={},l;for(l in d)j[l]=d[l];j.preventDefault=m;j.stopPropagation=n;j.target=a;j.type=b;d=j}do a[g]&&a[g].apply(a,e);while(d&&d.bubbles&&(a=a.parentNode));return d&&d.cancelable&&d},l={};
if(!h("event-stopimmediatepropagation"))var g=function(){this.modified=this.immediatelyStopped=!0},o=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=g,a.apply(this,arguments)}};l={focusin:"focus",focusout:"blur"};e.emit=function(a,b,c){if(a.dispatchEvent&&document.createEvent){var d=a.ownerDocument.createEvent("HTMLEvents");d.initEvent(b,!!c.bubbles,!!c.cancelable);for(var g in c)g in d||(d[g]=c[g]);return a.dispatchEvent(d)&&d}return j.apply(e,arguments)};
if(h("touch"))var s=function(){},O=window.orientation,I=function(a){return function(b){var c=b.corrected;if(!c){var d=b.type;try{delete b.type}catch(e){}b.type?(s.prototype=b,c=new s,c.preventDefault=function(){b.preventDefault()},c.stopPropagation=function(){b.stopPropagation()}):(c=b,c.type=d);b.corrected=c;if("resize"==d){if(O==window.orientation)return null;O=window.orientation;c.type="orientationchange";return a.call(this,c)}if(!("rotation"in c))c.rotation=0,c.scale=1;var d=c.changedTouches[0],
g;for(g in d)delete c[g],c[g]=d[g]}return a.call(this,c)}};return e})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(d,i,h,b){var m,d={},n={},e={config:i,global:this,dijit:d,dojox:n},d={dojo:["dojo",e],dijit:["dijit",d],dojox:["dojox",n]},b=h.map&&h.map[b.id.match(/[^\/]+/)[0]];for(m in b)d[m]?d[m][0]=b[m]:d[m]=[b[m],{}];for(m in d)b=d[m],b[1]._scopeName=b[0],i.noGlobals||(this[b[0]]=b[1]);e.scopeMap=d;e.baseUrl=e.config.baseUrl=h.baseUrl;e.isAsync=h.async;
e.locale=i.locale;i="$Rev$".match(/\d+/);e.version={major:1,minor:8,patch:3,flag:"",revision:i?+i[0]:NaN,toString:function(){var a=e.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(e);e.exit=function(){};e.deprecated=e.experimental=function(){};e._hasResource={};return e})},"dojo/_base/config":function(){define(["../has","require"],function(d,i){var h={},b=i.rawConfig,
m;for(m in b)h[m]=b[m];return h})},"hammer/hammer":function(){(function(d,i){function h(){if(!b.READY){b.event.determineEventTypes();for(var a in b.gestures)b.gestures.hasOwnProperty(a)&&b.detection.register(b.gestures[a]);b.event.onTouch(b.DOCUMENT,b.EVENT_MOVE,b.detection.detect);b.event.onTouch(b.DOCUMENT,b.EVENT_END,b.detection.detect);b.READY=!0}}var b=function(a,c){return new b.Instance(a,c||{})};b.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",
userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};b.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;b.HAS_TOUCHEVENTS="ontouchstart"in d;b.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;b.NO_MOUSEEVENTS=b.HAS_TOUCHEVENTS&&navigator.userAgent.match(b.MOBILE_REGEX);b.EVENT_TYPES={};b.DIRECTION_DOWN="down";b.DIRECTION_LEFT="left";b.DIRECTION_UP="up";b.DIRECTION_RIGHT="right";b.POINTER_MOUSE="mouse";b.POINTER_TOUCH="touch";b.POINTER_PEN="pen";b.EVENT_START="start";b.EVENT_MOVE=
"move";b.EVENT_END="end";b.DOCUMENT=document;b.plugins={};b.READY=!1;b.Instance=function(a,c){var d=this;h();this.element=a;this.enabled=!0;this.options=b.utils.extend(b.utils.extend({},b.defaults),c||{});this.options.stop_browser_behavior&&b.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior);b.event.onTouch(a,b.EVENT_START,function(a){d.enabled&&b.detection.startDetect(d,a)});return this};b.Instance.prototype={on:function(a,b){for(var d=a.split(" "),e=0;e<d.length;e++)this.element.addEventListener(d[e],
b,!1);return this},off:function(a,b){for(var d=a.split(" "),e=0;e<d.length;e++)this.element.removeEventListener(d[e],b,!1);return this},trigger:function(a,c){var d=b.DOCUMENT.createEvent("Event");d.initEvent(a,!0,!0);d.gesture=c;var e=this.element;if(b.utils.hasParent(c.target,e))e=c.target;e.dispatchEvent(d);return this},enable:function(a){this.enabled=a;return this}};var m=null,n=!1,e=!1;b.event={bindDom:function(a,b,d){for(var b=b.split(" "),e=0;e<b.length;e++)a.addEventListener(b[e],d,!1)},onTouch:function(a,
c,d){var l=this;this.bindDom(a,b.EVENT_TYPES[c],function(g){var h=g.type.toLowerCase();if(!h.match(/mouse/)||!e){h.match(/touch/)||h.match(/pointerdown/)||h.match(/mouse/)&&1===g.which?n=!0:h.match(/mouse/)&&1!==g.which&&(n=!1);h.match(/touch|pointer/)&&(e=!0);var i=0;if(n){b.HAS_POINTEREVENTS&&c!=b.EVENT_END?i=b.PointerEvent.updatePointer(c,g):h.match(/touch/)?i=g.touches.length:e||(i=h.match(/up/)?0:1);if(0<i&&c==b.EVENT_END)c=b.EVENT_MOVE;else if(!i)c=b.EVENT_END;!i&&null!==m?g=m:m=g;d.call(b.detection,
l.collectEventData(a,c,g));b.HAS_POINTEREVENTS&&c==b.EVENT_END&&(i=b.PointerEvent.updatePointer(c,g))}i||(m=null,e=n=!1,b.PointerEvent.reset())}})},determineEventTypes:function(){var a;a=b.HAS_POINTEREVENTS?b.PointerEvent.getEvents():b.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"];b.EVENT_TYPES[b.EVENT_START]=a[0];b.EVENT_TYPES[b.EVENT_MOVE]=a[1];b.EVENT_TYPES[b.EVENT_END]=a[2]},getTouchList:function(a){if(b.HAS_POINTEREVENTS)return b.PointerEvent.getTouchList();
if(a.touches)return a.touches;a.indentifier=1;return[a]},collectEventData:function(a,c,d){var a=this.getTouchList(d,c),e=b.POINTER_TOUCH;if(d.type.match(/mouse/)||b.PointerEvent.matchType(b.POINTER_MOUSE,d))e=b.POINTER_MOUSE;return{center:b.utils.getCenter(a),timeStamp:(new Date).getTime(),target:d.target,touches:a,eventType:c,pointerType:e,srcEvent:d,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation();this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},
stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return b.detection.stopDetect()}}}};b.PointerEvent={pointers:{},getTouchList:function(){var a=this,b=[];Object.keys(a.pointers).sort().forEach(function(d){b.push(a.pointers[d])});return b},updatePointer:function(a,c){a==b.EVENT_END?this.pointers={}:(c.identifier=c.pointerId,this.pointers[c.pointerId]=c);return Object.keys(this.pointers).length},matchType:function(a,c){if(!c.pointerType)return!1;var d={};d[b.POINTER_MOUSE]=
c.pointerType==c.MSPOINTER_TYPE_MOUSE||c.pointerType==b.POINTER_MOUSE;d[b.POINTER_TOUCH]=c.pointerType==c.MSPOINTER_TYPE_TOUCH||c.pointerType==b.POINTER_TOUCH;d[b.POINTER_PEN]=c.pointerType==c.MSPOINTER_TYPE_PEN||c.pointerType==b.POINTER_PEN;return d[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}};b.utils={extend:function(a,b,d){for(var e in b)a[e]!==i&&d||(a[e]=b[e]);
return a},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){for(var b=[],d=[],e=0,g=a.length;e<g;e++)b.push(a[e].pageX),d.push(a[e].pageY);return{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,d)+Math.max.apply(Math,d))/2}},getVelocity:function(a,b,d){return{x:Math.abs(b/a)||0,y:Math.abs(d/a)||0}},getAngle:function(a,b){return 180*Math.atan2(b.pageY-a.pageY,b.pageX-a.pageX)/Math.PI},getDirection:function(a,c){var d=
Math.abs(a.pageX-c.pageX),e=Math.abs(a.pageY-c.pageY);return d>=e?0<a.pageX-c.pageX?b.DIRECTION_LEFT:b.DIRECTION_RIGHT:0<a.pageY-c.pageY?b.DIRECTION_UP:b.DIRECTION_DOWN},getDistance:function(a,b){var d=b.pageX-a.pageX,e=b.pageY-a.pageY;return Math.sqrt(d*d+e*e)},getScale:function(a,b){return 2<=a.length&&2<=b.length?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return 2<=a.length&&2<=b.length?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==
b.DIRECTION_UP||a==b.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){var d,e="webkit,khtml,moz,ms,o,".split(",");if(b&&a.style){for(var g=0;g<e.length;g++)for(var h in b)b.hasOwnProperty(h)&&(d=h,e[g]&&(d=e[g]+d.substring(0,1).toUpperCase()+d.substring(1)),a.style[d]=b[h]);if("none"==b.userSelect)a.onselectstart=function(){return!1}}}};b.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,c){if(!this.current)this.stopped=!1,this.current={inst:a,startEvent:b.utils.extend({},
c),lastEvent:!1,name:""},this.detect(c)},detect:function(a){if(this.current&&!this.stopped){for(var a=this.extendEventData(a),c=this.current.inst.options,d=0,e=this.gestures.length;d<e;d++){var g=this.gestures[d];if(!this.stopped&&!1!==c[g.name]&&!1===g.handler.call(g,a,this.current.inst)){this.stopDetect();break}}if(this.current)this.current.lastEvent=a;a.eventType==b.EVENT_END&&!a.touches.length-1&&this.stopDetect();return a}},stopDetect:function(){this.previous=b.utils.extend({},this.current);
this.current=null;this.stopped=!0},extendEventData:function(a){var c=this.current.startEvent;if(c&&(a.touches.length!=c.touches.length||a.touches===c.touches)){c.touches=[];for(var d=0,e=a.touches.length;d<e;d++)c.touches.push(b.utils.extend({},a.touches[d]))}var d=a.timeStamp-c.timeStamp,e=a.center.pageX-c.center.pageX,g=a.center.pageY-c.center.pageY,h=b.utils.getVelocity(d,e,g);b.utils.extend(a,{deltaTime:d,deltaX:e,deltaY:g,velocityX:h.x,velocityY:h.y,distance:b.utils.getDistance(c.center,a.center),
angle:b.utils.getAngle(c.center,a.center),direction:b.utils.getDirection(c.center,a.center),scale:b.utils.getScale(c.touches,a.touches),rotation:b.utils.getRotation(c.touches,a.touches),startEvent:c});return a},register:function(a){var c=a.defaults||{};c[a.name]===i&&(c[a.name]=!0);b.utils.extend(b.defaults,c,!0);a.index=a.index||1E3;this.gestures.push(a);this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0});return this.gestures}};b.gestures=b.gestures||{};b.gestures.Hold=
{name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,c){switch(a.eventType){case b.EVENT_START:clearTimeout(this.timer);b.detection.current.name=this.name;this.timer=setTimeout(function(){"hold"==b.detection.current.name&&c.trigger("hold",a)},c.options.hold_timeout);break;case b.EVENT_MOVE:a.distance>c.options.hold_threshold&&clearTimeout(this.timer);break;case b.EVENT_END:clearTimeout(this.timer)}}};b.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,
tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(a,c){if(a.eventType==b.EVENT_END){var d=b.detection.previous,e=!1;if(!(a.deltaTime>c.options.tap_max_touchtime||a.distance>c.options.tap_max_distance))if(d&&"tap"==d.name&&a.timeStamp-d.lastEvent.timeStamp<c.options.doubletap_interval&&a.distance<c.options.doubletap_distance&&(c.trigger("doubletap",a),e=!0),!e||c.options.tap_always)b.detection.current.name="tap",c.trigger(b.detection.current.name,a)}}};
b.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:0.7},handler:function(a,c){if(a.eventType==b.EVENT_END&&!(0<c.options.swipe_max_touches&&a.touches.length>c.options.swipe_max_touches)&&(a.velocityX>c.options.swipe_velocity||a.velocityY>c.options.swipe_velocity))c.trigger(this.name,a),c.trigger(this.name+a.direction,a)}};b.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,
drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(a,c){if(b.detection.current.name!=this.name&&this.triggered)c.trigger(this.name+"end",a),this.triggered=!1;else if(!(0<c.options.drag_max_touches&&a.touches.length>c.options.drag_max_touches))switch(a.eventType){case b.EVENT_START:this.triggered=!1;break;case b.EVENT_MOVE:if(a.distance<c.options.drag_min_distance&&b.detection.current.name!=this.name)break;if(b.detection.current.name!=this.name&&(b.detection.current.name=
this.name,c.options.correct_for_drag_min_distance)){var d=Math.abs(c.options.drag_min_distance/a.distance);b.detection.current.startEvent.center.pageX+=a.deltaX*d;b.detection.current.startEvent.center.pageY+=a.deltaY*d;a=b.detection.extendEventData(a)}if(b.detection.current.lastEvent.drag_locked_to_axis||c.options.drag_lock_to_axis&&c.options.drag_lock_min_distance<=a.distance)a.drag_locked_to_axis=!0;d=b.detection.current.lastEvent.direction;if(a.drag_locked_to_axis&&d!==a.direction)a.direction=
b.utils.isVertical(d)?0>a.deltaY?b.DIRECTION_UP:b.DIRECTION_DOWN:0>a.deltaX?b.DIRECTION_LEFT:b.DIRECTION_RIGHT;if(!this.triggered)c.trigger(this.name+"start",a),this.triggered=!0;c.trigger(this.name,a);c.trigger(this.name+a.direction,a);(c.options.drag_block_vertical&&b.utils.isVertical(a.direction)||c.options.drag_block_horizontal&&!b.utils.isVertical(a.direction))&&a.preventDefault();break;case b.EVENT_END:this.triggered&&c.trigger(this.name+"end",a),this.triggered=!1}}};b.gestures.Transform={name:"transform",
index:45,defaults:{transform_min_scale:0.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,c){if(b.detection.current.name!=this.name&&this.triggered)c.trigger(this.name+"end",a),this.triggered=!1;else if(!(2>a.touches.length))switch(c.options.transform_always_block&&a.preventDefault(),a.eventType){case b.EVENT_START:this.triggered=!1;break;case b.EVENT_MOVE:var d=Math.abs(1-a.scale),e=Math.abs(a.rotation);if(d<c.options.transform_min_scale&&e<c.options.transform_min_rotation)break;
b.detection.current.name=this.name;if(!this.triggered)c.trigger(this.name+"start",a),this.triggered=!0;c.trigger(this.name,a);e>c.options.transform_min_rotation&&c.trigger("rotate",a);d>c.options.transform_min_scale&&(c.trigger("pinch",a),c.trigger("pinch"+(1>a.scale?"in":"out"),a));break;case b.EVENT_END:this.triggered&&c.trigger(this.name+"end",a),this.triggered=!1}}};b.gestures.Touch={name:"touch",index:-Infinity,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(a,c){c.options.prevent_mouseevents&&
a.pointerType==b.POINTER_MOUSE?a.stopDetect():(c.options.prevent_default&&a.preventDefault(),a.eventType==b.EVENT_START&&c.trigger(this.name,a))}};b.gestures.Release={name:"release",index:Infinity,handler:function(a,c){a.eventType==b.EVENT_END&&c.trigger(this.name,a)}};"function"==typeof define&&"object"==typeof define.amd&&define.amd?(d.Hammer=b,define(function(){return b})):"object"===typeof module&&"object"===typeof module.exports?module.exports=b:d.Hammer=b})(this)},"dojo/domReady":function(){define(["./has"],
function(){function d(a){n?a(h):e.push(a)}var i=this,h=document,b={loaded:1,complete:1},m="string"!=typeof h.readyState,n=!!b[h.readyState];if(m)h.readyState="loading";if(!n){var e=[],a=[],c=function(a){a=a||i.event;if(!(n||"readystatechange"==a.type&&!b[h.readyState])){n=1;if(m)h.readyState="complete";for(;e.length;)e.shift()(h)}},j=function(a,b){a.addEventListener(b,c,!1);e.push(function(){a.removeEventListener(b,c,!1)})};j(h,"DOMContentLoaded");j(i,"load");"onreadystatechange"in h?j(h,"readystatechange"):
m||a.push(function(){return b[h.readyState]});if(a.length){var l=function(){if(!n){for(var b=a.length;b--;)if(a[b]()){c("poller");return}setTimeout(l,30)}};l()}}d.load=function(a,b,c){d(c)};return d})},"frozen/ResourceManager":function(){define("require,./plugins/sound!,dcl,dcl/bases/Mixer,lodash,dojo/on".split(","),function(d,i,h,b,m,n){function e(a,b){var c=b;a&&(c=[a,b].join("/"));return c.replace(/\/{2,}/g,"/")}function a(a){var b=document.createElement("canvas");b.height=a.height;b.width=a.width;
var c=b.getContext("2d");c.translate(b.width,0);c.scale(-1,1);c.drawImage(a,0,0);return b.toDataURL()}function c(a){var b=document.createElement("canvas");b.height=a.height;b.width=a.width;var c=b.getContext("2d");c.translate(0,b.height);c.scale(1,-1);c.drawImage(a,0,0);return b.toDataURL()}var j=h(null,{name:"",img:null,complete:!1,constructor:function(a){var b=this;b.name=a;b.img=new Image;n.once(b.img,"load",function(){b.complete=!0})},load:function(){this.img.src=d.toUrl(this.name)}});return h(b,
{allLoaded:!1,imageDir:null,soundDir:null,resourceList:{},loadImage:function(a){var b=!1;if("object"!==typeof a)if("string"===typeof a)b=!0,a=[a];else return;var c=this,a=m.transform(a,function(a,b,d){b=e(c.imageDir,b);if(c.resourceList[b])return a[d]=c.resourceList[b].img;c.allLoaded=!1;var g=new j(b);g.load();c.resourceList[b]=g;a[d]=g.img});return b?a[0]:a},loadSound:function(a){var b=!1;if("object"!==typeof a)if("string"===typeof a)b=!0,a=[a];else return;var c=this,a=m.transform(a,function(a,
b,d){b=e(c.soundDir,b);if(c.resourceList[b])return a[d]=c.resourceList[b];c.allLoaded=!1;var g=new i(b);c.resourceList[b]=g;a[d]=g});return b?a[0]:a},flipImage:function(a,b,c){this.allLoaded=!1;var d=new j(a);this.resourceList[a]=d;n.once(b,"load",function(){d.img.src=c(b)});m.any(this.resourceList,function(a){if(a.img===b&&a.complete)return d.img.src=c(b),!0});return d.img},flipImageX:function(b,c){return this.flipImage(b,c,a)},flipImageY:function(a,b){return this.flipImage(a,b,c)},resourcesReady:function(){if(!this.allLoaded){for(var a in this.resourceList)if(!this.resourceList[a].complete)return!1;
this.allLoaded=!0}return!0},getPercentComplete:function(){var a=0,b=0,c;for(c in this.resourceList){var d=this.resourceList[c];b++;d.complete&&(a+=1)}return 0===b?0:Math.round(100*(a/b))}})})},"frozen/plugins/sound":function(){define(["../sounds/Sound","../sounds/WebAudio","../sounds/HTML5Audio","dojo/has"],function(d,i,h,b){return{load:function(m,n,e){return b("WebAudio")?e(i):b("HTML5Audio")?e(h):e(d)}}})},"frozen/sounds/Sound":function(){define(["dcl","dojo/has","dojo/sniff"],function(d,i){i.add("shittySound",
function(){return!(!i("android")&&!i("ios")||!i("webkit"))});return d(null,{declaredClass:"frozen/sounds/Sound",name:null,complete:!1,formats:{"audio/mpeg":".mp3","audio/webm":".webm","audio/ogg":".ogg","audio/wav":".wav","audio/aac":".aac","audio/x-m4a":".m4a"},probably:null,maybe:null,constructor:function(d){if(!this.probably)this.probably=[];if(!this.maybe)this.maybe=[];"string"===typeof d&&this.load(d)},load:function(d){this.name=d;this.complete=!0},loop:function(){},play:function(){},_initAudio:function(){},
_chooseFormat:function(){if(!this.probably.length&&!this.maybe.length){var d=new Audio,b,i;for(b in this.formats)i=d.canPlayType(b),"probably"===i?this.probably.push(this.formats[b]):"maybe"===i&&this.maybe.push(this.formats[b])}return this.probably.length?this.probably[0]:this.maybe.length?this.maybe[0]:""},_nextFormat:function(){if(1<this.probably.length)return this.probably.shift(),this.probably[0];if(1===this.probably.length&&(this.probably.length=0,this.maybe.length))return this.maybe[0];if(1<
this.maybe.length)return this.maybe.shift(),this.maybe[0];if(1===this.maybe.length)this.maybe.length=0;return""}})})},"dojo/sniff":function(){define(["./has"],function(d){var i=navigator,h=i.userAgent,i=i.appVersion,b=parseFloat(i);d.add("air",0<=h.indexOf("AdobeAIR"));d.add("khtml",0<=i.indexOf("Konqueror")?b:void 0);d.add("webkit",parseFloat(h.split("WebKit/")[1])||void 0);d.add("chrome",parseFloat(h.split("Chrome/")[1])||void 0);d.add("safari",0<=i.indexOf("Safari")&&!d("chrome")?parseFloat(i.split("Version/")[1]):
void 0);d.add("mac",0<=i.indexOf("Macintosh"));d.add("quirks","BackCompat"==document.compatMode);d.add("ios",/iPhone|iPod|iPad/.test(h));d.add("android",parseFloat(h.split("Android ")[1])||void 0);if(!d("webkit")){0<=h.indexOf("Opera")&&d.add("opera",9.8<=b?parseFloat(h.split("Version/")[1])||b:b);0<=h.indexOf("Gecko")&&!d("khtml")&&!d("webkit")&&d.add("mozilla",b);d("mozilla")&&d.add("ff",parseFloat(h.split("Firefox/")[1]||h.split("Minefield/")[1])||void 0);if(document.all&&!d("opera"))h=parseFloat(i.split("MSIE ")[1])||
void 0,(i=document.documentMode)&&5!=i&&Math.floor(h)!=i&&(h=i),d.add("ie",h);d.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return d})},"frozen/sounds/WebAudio":function(){define("require,./Sound,../utils/removeExtension,dcl,dojo/on,dojo/has,../shims/AudioContext".split(","),function(d,i,h,b,m,n){n.add("WebAudio",function(a){return!!a.AudioContext});var e=null;if(n("WebAudio")&&(e=new window.AudioContext,n("shittySound")))m.once(document,"touchstart",function(){var a=e.createBufferSource();
a.buffer=e.createBuffer(1,1,22050);a.connect(e.destination);a.noteOn(0)});return b(i,{declaredClass:"frozen/sounds/WebAudio",audioContext:e,buffer:null,load:function(a){var b=this;this.name=a;var e=h(a);e===a&&(a=e+this._chooseFormat());a=d.toUrl(a);e=new XMLHttpRequest;e.open("GET",a,!0);e.responseType="arraybuffer";m.once(e,"load",function(a){b.audioContext.decodeAudioData(a.target.response,function(a){b.buffer=a;b.complete=!0},function(){b._nextFormat()?b.load(b.name):b.complete=!0})});e.send()},
loop:function(a){this.buffer&&this._initAudio(a,!0).noteOn(0)},play:function(a,b){this.buffer&&this._initAudio(a,!1).noteOn(b||0)},_initAudio:function(a,b){var b="boolean"===typeof b?b:!1,d=this.audioContext.createBufferSource();d.buffer=this.buffer;d.loop=b;if(a){var e=this.audioContext.createGainNode();e.gain.value=a;d.connect(e);e.connect(this.audioContext.destination)}else d.connect(this.audioContext.destination);return d}})})},"frozen/utils/removeExtension":function(){define(function(){return function(d){return d.replace(/(.*)\.[^.]{1,4}$/,
"")}})},"frozen/shims/AudioContext":function(){define(function(){for(var d=["ms","moz","webkit","o"],i=0;i<d.length&&!window.AudioContext;++i)window.AudioContext=window[d[i]+"AudioContext"]})},"frozen/sounds/HTML5Audio":function(){define("require,./Sound,../utils/removeExtension,dcl,dojo/on,dojo/has".split(","),function(d,i,h,b,m,n){n.add("HTML5Audio",function(b){return!!b.Audio});return b(i,{declaredClass:"frozen/sounds/HTML5Audio",audio:null,load:function(b){this.audio=new Audio;var a=this;this.name=
b;var c=h(b);c===b&&(b=c+this._chooseFormat());b=d.toUrl(b);if(n("shittySound"))m.once(document,"touchstart",function(){var b=a.audio.volume;a.audio.volume=0;a.audio.play();a.audio.pause();a.audio.volume=b}),this._updateCurrentTime=null,m.once(this.audio,"progress",function(){null!==a._updateCurrentTime&&a._updateCurrentTime()});this.audio.pause();this.audio.preload="auto";m.once(this.audio,"error",function(){a._nextFormat()?a.load(a.name):(a.audio.src=null,a.complete=!0)});m.once(this.audio,"loadeddata",
function(){a.complete=!0});this.audio.src=b},loop:function(b){var a=this._initAudio(b,!0);m.once(a,"loadeddata",function(){a.play()})},play:function(b,a){a=a||0;if(n("shittySound"))try{return this.audio.currentTime=a/1E3,this.audio.play()}catch(c){return this._updateCurrentTime=function(){this._updateCurrentTime=null;this.audio.currentTime=a/1E3;return this.audio.play()},this.audio.play()}var d=this._initAudio(b,!1);m.once(d,"loadeddata",function(){d.currentTime=a/1E3;d.play()})},_initAudio:function(b,
a){var a="boolean"===typeof a?a:!1,c=new Audio;c.pause();c.volume=b||1;c.loop=a;c.preload="auto";c.mozLoadFrom?c.mozLoadFrom(this.audio):c.src=this.audio.currentSrc;return c}})})},"frozen/shims/RAF":function(){define(function(){for(var d=0,i=["ms","moz","webkit","o"],h=0;h<i.length&&!window.requestAnimationFrame;++h)window.requestAnimationFrame=window[i[h]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[h]+"CancelAnimationFrame"]||window[i[h]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame)window.requestAnimationFrame=
function(b){var h=(new Date).getTime(),i=Math.max(0,16-(h-d)),e=window.setTimeout(function(){b(h+i)},i);d=h+i;return e};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(b){clearTimeout(b)}})},"frozen/Animation":function(){define(["./AnimFrame","dcl","dcl/bases/Mixer"],function(d,i,h){var b=i(h,{currFrameIndex:0,animTime:0,totalDuration:0,height:64,width:64,image:null,offsetX:0,offsetY:0,constructor:function(){this.start()},createFromSheet:function(d,h,e,a,c,i){e=new b({image:e,
height:c,width:a});a=Array.isArray(h);c=1;i||(i=0);for(var l=0;l<d;l++)c=a?h[l]:h,e.addFrame(c,l,i);return e},clone:function(){return new b({image:this.image,frames:this.frames,totalDuration:this.totalDuration})},addFrame:function(b,h,e){if(!this.frames)this.frames=[];this.totalDuration+=b;this.frames.push(new d({endTime:this.totalDuration,image:this.image,imgSlotX:h,imgSlotY:e}))},start:function(){this.currFrameIndex=this.animTime=0},update:function(b){if(1<this.frames.length){this.animTime+=b;if(this.animTime>=
this.totalDuration)this.animTime%=this.totalDuration,this.currFrameIndex=0;for(;this.animTime>this.frames[this.currFrameIndex].endTime;)this.currFrameIndex++}},getCurrentFrame:function(){return 0===this.frames.length?null:this.frames[this.currFrameIndex]},draw:function(b,d,e){var a=this.getCurrentFrame();b.drawImage(this.image,a.imgSlotX*this.width+this.offsetX,a.imgSlotY*this.height+this.offsetY,this.width,this.height,d,e,this.width,this.height)}});return b})},"frozen/AnimFrame":function(){define(["dcl",
"dcl/bases/Mixer"],function(d,i){return d(i,{endTime:0,imgSlotX:0,imgSlotY:0,image:null})})},"frozen/plugins/loadImage":function(){define(["../ResourceManager","../utils/parseString"],function(d,i){var h=new d;return{load:function(b,d,n){b=i(b);b=h.loadImage(b);n(b)}}})},"frozen/utils/parseString":function(){define(function(){return function(d){0===d.indexOf("{")&&d.lastIndexOf("}")===d.length-1?d=JSON.parse(d.replace(/,/g,'","').replace(/:(?!\/\/)/g,'":"').replace(/\{/,'{"').replace(/\}/,'"}')):
0===d.indexOf("[")&&d.lastIndexOf("]")===d.length-1&&(d=JSON.parse(d.replace(/,/g,'","').replace(/\[/g,'["').replace(/\]/g,'"]')));return d}})}}});(function(){require({cache:{}});require.boot&&require.apply(null,require.boot)})();